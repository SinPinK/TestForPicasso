{"version":3,"file":"BreadcrumbsMore.js","names":["React","forwardRef","useEffect","useRef","useFlag","cn","getByMap","Button","ContextMenu","BreadcrumbsItem","iconSizeMap","cnBreadcrumbsMore","getLeftSideBar","iconSize","getItemIcon","item","Icon","getItemAs","getItemHref","href","getItemAttributes","contextMenuSizeMap","xs","s","m","l","BreadcrumbsMoreRender","props","ref","size","items","className","style","getItemLabel","getItemOnClickProp","getItemOnClick","getItemSubMenu","onItemClickProp","onItemClick","otherProps","open","setOpen","buttonRef","off","toggle","element","e","BreadcrumbsMore"],"sources":["../../../../../../src/components/Breadcrumbs/BreadcrumbsMore/BreadcrumbsMore.tsx"],"sourcesContent":["import './BreadcrumbsMore.css';\n\nimport React, { forwardRef, useEffect, useRef } from 'react';\n\nimport { useFlag } from '../../../hooks/useFlag/useFlag';\nimport { cn } from '../../../utils/bem';\nimport { getByMap } from '../../../utils/getByMap';\nimport { Button } from '../../Button/Button';\nimport { ContextMenu } from '../../ContextMenu/ContextMenu';\nimport { BreadcrumbsItem } from '../BreadcrumbsItem/BreadcrumbsItem';\nimport { iconSizeMap } from '../helpers';\nimport {\n  BreadcrumbsMoreComponent,\n  BreadcrumbsMoreProps,\n  BreadcrumbsPropGetItemHref,\n  BreadcrumbsPropGetItemIcon,\n} from '../types';\n\nconst cnBreadcrumbsMore = cn('BreadcrumbsMore');\n\nexport function getLeftSideBar<ITEM>(\n  iconSize: 'xs' | 'm',\n  getItemIcon?: BreadcrumbsPropGetItemIcon<ITEM>,\n) {\n  return function (item: ITEM) {\n    const Icon = getItemIcon?.(item);\n    if (Icon) {\n      return <Icon size={iconSize} />;\n    }\n    return undefined;\n  };\n}\n\nexport function getItemAs<ITEM>(\n  getItemHref?: BreadcrumbsPropGetItemHref<ITEM>,\n) {\n  return (item: ITEM) => {\n    const href = getItemHref?.(item);\n    return href ? 'a' : 'span';\n  };\n}\n\nexport function getItemAttributes<ITEM>(\n  getItemHref?: BreadcrumbsPropGetItemHref<ITEM>,\n) {\n  return (item: ITEM) => {\n    return getItemHref && { href: getItemHref(item) };\n  };\n}\n\nexport const contextMenuSizeMap = {\n  xs: 's',\n  s: 's',\n  m: 'm',\n  l: 'l',\n} as const;\n\nfunction BreadcrumbsMoreRender<ITEM>(\n  props: BreadcrumbsMoreProps<ITEM>,\n  ref: React.Ref<HTMLLIElement>,\n) {\n  const {\n    size,\n    items,\n    className,\n    style,\n    getItemHref,\n    getItemIcon,\n    getItemLabel,\n    getItemOnClick: getItemOnClickProp,\n    getItemSubMenu,\n    onItemClick: onItemClickProp,\n    ...otherProps\n  } = props;\n\n  const [open, setOpen] = useFlag();\n\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const iconSize = getByMap(iconSizeMap, size);\n\n  useEffect(setOpen.off, [items]);\n\n  const onItemClick = ({\n    e,\n    item,\n  }: {\n    e: React.MouseEvent<HTMLDivElement>;\n    item: ITEM;\n  }) => {\n    onItemClickProp?.({ e, item });\n    getItemOnClickProp?.(item)?.(e);\n  };\n\n  const getItemOnClick =\n    (element: ITEM) =>\n    ({ e }: { e: React.MouseEvent<HTMLDivElement> }) => {\n      return getItemOnClickProp?.(element)?.(e);\n    };\n\n  return (\n    <BreadcrumbsItem\n      {...otherProps}\n      className={cnBreadcrumbsMore(null, [className])}\n      delimiter\n      size={size}\n      ref={ref}\n      style={{\n        ...style,\n        ['--breadcrumbs-more-font-size' as string]: `var(--size-text-${size})`,\n      }}\n    >\n      <Button\n        className={cnBreadcrumbsMore('Button')}\n        view=\"clear\"\n        type=\"button\"\n        label=\"...\"\n        size={iconSize}\n        ref={buttonRef}\n        onClick={setOpen.toggle}\n      />\n      <ContextMenu\n        items={items}\n        isOpen={open}\n        getItemLabel={getItemLabel}\n        getItemSubMenu={getItemSubMenu}\n        getItemOnClick={getItemOnClick}\n        onItemClick={onItemClick}\n        getItemLeftIcon={getItemIcon}\n        anchorRef={buttonRef}\n        onClickOutside={setOpen.off}\n        getItemAs={getItemAs(getItemHref)}\n        getItemAttributes={getItemAttributes(getItemHref)}\n        direction=\"downCenter\"\n        possibleDirections={[\n          'downCenter',\n          'upCenter',\n          'downStartLeft',\n          'upStartLeft',\n          'downStartRight',\n          'upStartRight',\n        ]}\n        offset=\"xs\"\n        size={contextMenuSizeMap[size]}\n      />\n    </BreadcrumbsItem>\n  );\n}\n\nexport const BreadcrumbsMore = forwardRef(\n  BreadcrumbsMoreRender,\n) as BreadcrumbsMoreComponent;\n"],"mappings":"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"}