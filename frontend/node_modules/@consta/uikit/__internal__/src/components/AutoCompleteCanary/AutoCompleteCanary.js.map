{"version":3,"file":"AutoCompleteCanary.js","names":["React","useRef","SelectDropdown","SelectItem","defaultPropForm","defaultPropSize","defaultPropView","TextField","useForkRef","cnCanary","withDefaultGetters","useAutoComplete","cnAutoComplete","AutoCompleteRender","props","ref","defaultDropdownRef","controlRef","containerRef","items","groups","disabled","getItemLabel","getItemKey","isLoading","getItemGroupKey","getGroupKey","getGroupLabel","onBlur","inputRef","onFocus","dropdownRef","dropdownClassName","dropdownForm","value","form","view","size","onChange","inputContainerRef","style","renderItem","searchFunction","id","name","className","otherProps","handleSelectChange","e","copyEvent","newValue","Array","isArray","searchValue","getOptionProps","isOpen","getKeyProps","visibleItems","handleInputFocus","handleInputBlur","inputControlRef","renderItemDefault","item","active","hovered","onClick","onMouseEnter","length","zIndex","AutoComplete","forwardRef"],"sources":["../../../../../src/components/AutoCompleteCanary/AutoCompleteCanary.tsx"],"sourcesContent":["import React, { useRef } from 'react';\n\nimport { PropRenderItem } from '##/components/Select';\nimport { SelectDropdown } from '##/components/SelectComponents/SelectDropdown/SelectDropdown';\nimport { SelectItem } from '##/components/SelectComponents/SelectItem/SelectItem';\nimport {\n  defaultPropForm,\n  defaultPropSize,\n  defaultPropView,\n} from '##/components/SelectComponents/types';\nimport { TextField } from '##/components/TextField/TextField';\nimport { useForkRef } from '##/hooks/useForkRef';\nimport { cnCanary } from '##/utils/bem';\n\nimport { withDefaultGetters } from './helpers';\nimport {\n  AutoCompleteComponent,\n  AutoCompleteGroupDefault,\n  AutoCompleteItemDefault,\n  AutoCompleteProps,\n} from './types';\nimport { useAutoComplete } from './useAutoComplete';\n\nconst cnAutoComplete = cnCanary('AutoComplete');\n\nconst AutoCompleteRender = <\n  TYPE extends string,\n  ITEM = AutoCompleteItemDefault,\n  GROUP = AutoCompleteGroupDefault,\n>(\n  props: AutoCompleteProps<TYPE, ITEM, GROUP>,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const defaultDropdownRef = useRef<HTMLDivElement | null>(null);\n  const controlRef = useRef<HTMLDivElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const {\n    items,\n    groups = [],\n    disabled,\n    getItemLabel,\n    getItemKey,\n    isLoading,\n    getItemGroupKey,\n    getGroupKey,\n    getGroupLabel,\n    onBlur,\n    inputRef,\n    onFocus,\n    dropdownRef = defaultDropdownRef,\n    dropdownClassName,\n    dropdownForm = 'default',\n    value,\n    form = defaultPropForm,\n    view = defaultPropView,\n    size = defaultPropSize,\n    onChange,\n    inputContainerRef,\n    style,\n    renderItem,\n    searchFunction,\n    id,\n    name,\n    className,\n    ...otherProps\n  } = withDefaultGetters(props);\n\n  const handleSelectChange = ({\n    e,\n    value,\n  }: {\n    value: ITEM | null;\n    e: React.SyntheticEvent;\n  }) => {\n    const copyEvent = { ...e } as React.KeyboardEvent;\n    const newValue = (value ? getItemLabel(value) : value) as string;\n    onChange?.({ e: copyEvent, value: newValue, id, name });\n  };\n\n  const {\n    getOptionProps,\n    isOpen,\n    getKeyProps,\n    visibleItems,\n    handleInputFocus,\n    handleInputBlur,\n    inputRef: inputControlRef,\n  } = useAutoComplete({\n    items,\n    groups,\n    onChange: ({ e, value }) =>\n      handleSelectChange({ e, value: Array.isArray(value) ? value[0] : value }),\n    dropdownRef,\n    controlRef,\n    disabled,\n    searchValue: value ?? '',\n    getItemLabel,\n    getItemKey,\n    getItemGroupKey,\n    getGroupKey,\n    onBlur,\n    onFocus,\n    searchFunction,\n  });\n\n  const renderItemDefault: PropRenderItem<ITEM> = (props) => {\n    const { item, active, hovered, onClick, onMouseEnter } = props;\n\n    return (\n      <SelectItem\n        label={getItemLabel(item)}\n        active={active}\n        hovered={hovered}\n        multiple={false}\n        disabled={disabled}\n        size={size}\n        indent={dropdownForm === 'round' ? 'increased' : 'normal'}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n      />\n    );\n  };\n\n  return (\n    <>\n      <TextField\n        {...getKeyProps()}\n        form={form}\n        view={view}\n        id={id}\n        className={cnAutoComplete(null, [className])}\n        name={name}\n        disabled={disabled}\n        ref={useForkRef([controlRef, ref])}\n        inputRef={useForkRef([inputRef, inputControlRef])}\n        onBlur={handleInputBlur}\n        inputContainerRef={useForkRef([containerRef, inputContainerRef])}\n        onFocus={handleInputFocus}\n        onChange={onChange}\n        value={value}\n        style={style}\n        size={size}\n        {...otherProps}\n      />\n      <SelectDropdown\n        isOpen={isOpen}\n        size={size}\n        controlRef={containerRef}\n        getOptionProps={getOptionProps}\n        dropdownRef={dropdownRef}\n        form={dropdownForm}\n        className={cnAutoComplete('List', [dropdownClassName])}\n        renderItem={renderItem || renderItemDefault}\n        getGroupLabel={getGroupLabel}\n        visibleItems={visibleItems}\n        isLoading={isLoading}\n        hasItems={items.length !== 0}\n        style={\n          typeof style?.zIndex === 'number'\n            ? { zIndex: style.zIndex + 1 }\n            : undefined\n        }\n      />\n    </>\n  );\n};\n\nexport const AutoComplete = React.forwardRef(\n  AutoCompleteRender,\n) as AutoCompleteComponent;\n\nexport * from './types';\n"],"mappings":"ukCAAA,MAAOA,MAAP,EAAgBC,MAAhB,KAA8B,OAA9B,CAGA,OAASC,cAAT,yDACA,OAASC,UAAT,iDACA,OACEC,eADF,CAEEC,eAFF,CAGEC,eAHF,iCAKA,OAASC,SAAT,8BACA,OAASC,UAAT,8BACA,OAASC,QAAT,uBAEA,OAASC,kBAAT,iBAOA,OAASC,eAAT,yB,GAEMC,eAAc,CAAGH,QAAQ,CAAC,cAAD,C,CAEzBI,kBAAkB,CAAG,SAKzBC,CALyB,CAMzBC,CANyB,CAOtB,IACGC,EAAkB,CAAGf,MAAM,CAAwB,IAAxB,CAD9B,CAEGgB,CAAU,CAAGhB,MAAM,CAAiB,IAAjB,CAFtB,CAGGiB,CAAY,CAAGjB,MAAM,CAAiB,IAAjB,CAHxB,GAkCCS,kBAAkB,CAACI,CAAD,CAlCnB,CAMDK,CANC,GAMDA,KANC,KAODC,MAPC,CAODA,CAPC,YAOQ,EAPR,GAQDC,CARC,GAQDA,QARC,CASDC,CATC,GASDA,YATC,CAUDC,CAVC,GAUDA,UAVC,CAWDC,CAXC,GAWDA,SAXC,CAYDC,CAZC,GAYDA,eAZC,CAaDC,CAbC,GAaDA,WAbC,CAcDC,CAdC,GAcDA,aAdC,CAeDC,CAfC,GAeDA,MAfC,CAgBDC,CAhBC,GAgBDA,QAhBC,CAiBDC,CAjBC,GAiBDA,OAjBC,KAkBDC,WAlBC,CAkBDA,CAlBC,YAkBaf,CAlBb,GAmBDgB,CAnBC,GAmBDA,iBAnBC,KAoBDC,YApBC,CAoBDA,CApBC,YAoBc,SApBd,GAqBDC,CArBC,GAqBDA,KArBC,KAsBDC,IAtBC,CAsBDA,CAtBC,YAsBM/B,eAtBN,OAuBDgC,IAvBC,CAuBDA,CAvBC,YAuBM9B,eAvBN,OAwBD+B,IAxBC,CAwBDA,CAxBC,YAwBMhC,eAxBN,GAyBDiC,CAzBC,GAyBDA,QAzBC,CA0BDC,CA1BC,GA0BDA,iBA1BC,CA2BDC,CA3BC,GA2BDA,KA3BC,CA4BDC,CA5BC,GA4BDA,UA5BC,CA6BDC,CA7BC,GA6BDA,cA7BC,CA8BDC,CA9BC,GA8BDA,EA9BC,CA+BDC,CA/BC,GA+BDA,IA/BC,CAgCDC,CAhCC,GAgCDA,SAhCC,CAiCEC,CAjCF,uCAoCGC,CAAkB,CAAG,WAMrB,IALJC,EAKI,GALJA,CAKI,CAJJd,CAII,GAJJA,KAII,CACEe,CAAS,kBAAQD,CAAR,CADX,CAEEE,CAAQ,CAAIhB,CAAK,CAAGZ,CAAY,CAACY,CAAD,CAAf,CAAyBA,CAF5C,QAGJI,CAHI,WAGJA,CAHI,QAGJA,CAAQ,CAAG,CAAEU,CAAC,CAAEC,CAAL,CAAgBf,KAAK,CAAEgB,CAAvB,CAAiCP,EAAE,CAAFA,CAAjC,CAAqCC,IAAI,CAAJA,CAArC,CAAH,CACT,CA9CE,GAwDCjC,eAAe,CAAC,CAClBQ,KAAK,CAALA,CADkB,CAElBC,MAAM,CAANA,CAFkB,CAGlBkB,QAAQ,CAAE,eAAGU,EAAH,GAAGA,CAAH,CAAMd,CAAN,GAAMA,KAAN,OACRa,EAAkB,CAAC,CAAEC,CAAC,CAADA,CAAF,CAAKd,KAAK,CAAEiB,KAAK,CAACC,OAAN,CAAclB,CAAd,EAAuBA,CAAK,CAAC,CAAD,CAA5B,CAAkCA,CAA9C,CAAD,CADV,CAHQ,CAKlBH,WAAW,CAAXA,CALkB,CAMlBd,UAAU,CAAVA,CANkB,CAOlBI,QAAQ,CAARA,CAPkB,CAQlBgC,WAAW,QAAEnB,CAAF,WAAEA,CAAF,CAAEA,CAAF,CAAW,EARJ,CASlBZ,YAAY,CAAZA,CATkB,CAUlBC,UAAU,CAAVA,CAVkB,CAWlBE,eAAe,CAAfA,CAXkB,CAYlBC,WAAW,CAAXA,CAZkB,CAalBE,MAAM,CAANA,CAbkB,CAclBE,OAAO,CAAPA,CAdkB,CAelBY,cAAc,CAAdA,CAfkB,CAAD,CAxDhB,CAiDDY,CAjDC,GAiDDA,cAjDC,CAkDDC,CAlDC,GAkDDA,MAlDC,CAmDDC,CAnDC,GAmDDA,WAnDC,CAoDDC,CApDC,GAoDDA,YApDC,CAqDDC,CArDC,GAqDDA,gBArDC,CAsDDC,CAtDC,GAsDDA,eAtDC,CAuDSC,CAvDT,GAuDD/B,QAvDC,CA4FH,MACE,yCACE,oBAAC,SAAD,kBACM2B,CAAW,EADjB,EAEE,IAAI,CAAErB,CAFR,CAGE,IAAI,CAAEC,CAHR,CAIE,EAAE,CAAEO,CAJN,CAKE,SAAS,CAAE/B,cAAc,CAAC,IAAD,CAAO,CAACiC,CAAD,CAAP,CAL3B,CAME,IAAI,CAAED,CANR,CAOE,QAAQ,CAAEvB,CAPZ,CAQE,GAAG,CAAEb,UAAU,CAAC,CAACS,CAAD,CAAaF,CAAb,CAAD,CARjB,CASE,QAAQ,CAAEP,UAAU,CAAC,CAACqB,CAAD,CAAW+B,CAAX,CAAD,CATtB,CAUE,MAAM,CAAED,CAVV,CAWE,iBAAiB,CAAEnD,UAAU,CAAC,CAACU,CAAD,CAAeqB,CAAf,CAAD,CAX/B,CAYE,OAAO,CAAEmB,CAZX,CAaE,QAAQ,CAAEpB,CAbZ,CAcE,KAAK,CAAEJ,CAdT,CAeE,KAAK,CAAEM,CAfT,CAgBE,IAAI,CAAEH,CAhBR,EAiBMS,CAjBN,EADF,CAoBE,oBAAC,cAAD,EACE,MAAM,CAAES,CADV,CAEE,IAAI,CAAElB,CAFR,CAGE,UAAU,CAAEnB,CAHd,CAIE,cAAc,CAAEoC,CAJlB,CAKE,WAAW,CAAEvB,CALf,CAME,IAAI,CAAEE,CANR,CAOE,SAAS,CAAErB,cAAc,CAAC,MAAD,CAAS,CAACoB,CAAD,CAAT,CAP3B,CAQE,UAAU,CAAES,CAAU,EA/CoB,QAA1CoB,kBAA0C,CAAC/C,CAAD,CAAW,CACzD,GAAQgD,EAAR,CAAyDhD,CAAzD,CAAQgD,IAAR,CAAcC,CAAd,CAAyDjD,CAAzD,CAAciD,MAAd,CAAsBC,CAAtB,CAAyDlD,CAAzD,CAAsBkD,OAAtB,CAA+BC,CAA/B,CAAyDnD,CAAzD,CAA+BmD,OAA/B,CAAwCC,CAAxC,CAAyDpD,CAAzD,CAAwCoD,YAAxC,CAEA,MACE,qBAAC,UAAD,EACE,KAAK,CAAE5C,CAAY,CAACwC,CAAD,CADrB,CAEE,MAAM,CAAEC,CAFV,CAGE,OAAO,CAAEC,CAHX,CAIE,QAAQ,GAJV,CAKE,QAAQ,CAAE3C,CALZ,CAME,IAAI,CAAEgB,CANR,CAOE,MAAM,CAAmB,OAAjB,GAAAJ,CAAY,CAAe,WAAf,CAA6B,QAPnD,CAQE,OAAO,CAAEgC,CARX,CASE,YAAY,CAAEC,CAThB,EAYH,CAuBG,CASE,aAAa,CAAEvC,CATjB,CAUE,YAAY,CAAE8B,CAVhB,CAWE,SAAS,CAAEjC,CAXb,CAYE,QAAQ,CAAmB,CAAjB,GAAAL,CAAK,CAACgD,MAZlB,CAaE,KAAK,CACsB,QAAzB,gBAAO3B,CAAP,WAAOA,CAAP,QAAOA,CAAK,CAAE4B,MAAd,EACI,CAAEA,MAAM,CAAE5B,CAAK,CAAC4B,MAAN,CAAe,CAAzB,CADJ,OAdJ,EApBF,CAyCH,C,CAED,MAAO,IAAMC,aAAY,CAAGrE,KAAK,CAACsE,UAAN,CAC1BzD,kBAD0B,CAArB,CAIP"}