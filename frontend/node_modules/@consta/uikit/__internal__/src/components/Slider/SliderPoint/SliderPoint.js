import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["hovered","onHover","value","position","disabled","withTooltip","focused","popoverPosition","buttonRef","handlePress","onKeyPress","tooltipFormatter","buttonLabel","onFocus","tooltipZIndex"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./SliderPoint.css";import React,{useEffect,useRef}from"react";import{useFlag}from"../../../hooks/useFlag/useFlag";import{useForkRef}from"../../../hooks/useForkRef/useForkRef";import{cnMixFocus}from"../../../mixs/MixFocus/MixFocus";import{cn}from"../../../utils/bem";import{generateThemeClassNames,ThemeContext,useTheme}from"../../Theme/Theme";import{Tooltip}from"../../Tooltip/Tooltip";var cnSliderPoint=cn("SliderPoint"),getTooltipPosition=function(a,b){if(a&&b&&b.current){var c=b.current.getBoundingClientRect(),d=c.y,e=c.height;return{x:a.x,y:d-e+30}}return{x:0,y:0}};export var SliderPoint=function(a){var b=a.hovered,c=a.onHover,d=a.value,e=a.position,f=a.disabled,g=a.withTooltip,h=a.focused,i=a.popoverPosition,j=a.buttonRef,k=a.handlePress,l=a.onKeyPress,m=a.tooltipFormatter,n=a.buttonLabel,o=a.onFocus,p=a.tooltipZIndex,q=_objectWithoutProperties(a,_excluded),r=useFlag(!1),s=_slicedToArray(r,2),t=s[0],u=s[1],v=u.on,w=u.off,x=useTheme(),y=x.theme,z=_objectSpread(_objectSpread({},y),{},{color:{primary:y.color.invert,accent:y.color.accent,invert:y.color.primary}}),A=generateThemeClassNames(z);useEffect(function(){h?v():w()},[h]);var B=function(a){f||(null===o||void 0===o?void 0:o(a,n),v())},C=function(a){f||(null===c||void 0===c?void 0:c(a),a&&v(),a&&v(),!a&&!h&&w())},D=useRef(null);return React.createElement(React.Fragment,null,React.createElement("button",Object.assign({type:"button","aria-label":"".concat(n,"-button"),className:cnSliderPoint({hovered:b,disabled:f},[f?"":cnMixFocus()]),onMouseOver:function onMouseOver(){return C(!0)},onMouseOut:function onMouseOut(){return C(!1)},onMouseDown:function onMouseDown(){return null===k||void 0===k?void 0:k(n)},onTouchStart:function onTouchStart(){return null===k||void 0===k?void 0:k(n)},onKeyDown:function onKeyDown(a){return null===l||void 0===l?void 0:l(a,n)},onFocus:B,onBlur:function handleBlur(a){f||(null===o||void 0===o?void 0:o(a,null),w())},onClick:B,ref:useForkRef([j,D]),tabIndex:0,style:_defineProperty({},"--slider-button-left","".concat(e,"%"))},q)),t&&g&&i&&React.createElement(ThemeContext.Provider,{value:{theme:z,themeClassNames:A}},React.createElement(Tooltip,{position:getTooltipPosition(i,j||D),className:cnSliderPoint("Tooltip"),direction:"downCenter",possibleDirections:["downCenter","leftDown","rightDown"],style:{zIndex:p}},m?m(d):d)))};
//# sourceMappingURL=SliderPoint.js.map