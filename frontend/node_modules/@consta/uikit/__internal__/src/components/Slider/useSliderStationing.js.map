{"version":3,"file":"useSliderStationing.js","names":["useCallback","useEffect","useMemo","useState","COUNT_STEPS","getSteps","step","min","max","stepsArray","size","Array","isArray","i","length","push","useSliderStationing","value","view","range","buttonRefs","sliderLineRef","lineSizes","setLineSizes","buttonPositions","setButtonPositions","calcualtedStep","val","Math","abs","calculateLines","sizesArray","absoluteSize","width","active","forEach","stepSize","endPointArray","unshift","getValidValue","calculateButtonPositions","defaultPaddingValue","positions","buttonRef","index","current","offsetWidth"],"sources":["../../../../../src/components/Slider/useSliderStationing.ts"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { Line, PropView } from './helper';\nimport { COUNT_STEPS } from './useSlider/useSlider';\n\ntype UseSliderStationing = (\n  value: number | [number, number] | undefined,\n  min: number,\n  max: number,\n  view: PropView,\n  range: boolean | undefined,\n  step: number | number[] | undefined,\n  buttonRefs: [\n    React.RefObject<HTMLButtonElement>,\n    React.RefObject<HTMLButtonElement>,\n  ],\n  sliderLineRef: React.RefObject<HTMLButtonElement | HTMLDivElement>,\n) => {\n  lineSizes: Line[];\n  buttonPositions: number[];\n};\n\nexport const getSteps = (step: number | number[], min: number, max: number) => {\n  const stepsArray: { min: number; max: number }[] = [];\n  let size = min;\n  if (Array.isArray(step)) {\n    for (let i = 0; i < step.length - 1; i++) {\n      stepsArray.push({\n        min: step[i],\n        max: step[i + 1],\n      });\n    }\n  } else {\n    for (let i = min; i < max; i += step) {\n      stepsArray.push({\n        min: size,\n        max: size + (max - i < step ? max - i : step),\n      });\n      size += step;\n    }\n  }\n  return stepsArray;\n};\n\nexport const useSliderStationing: UseSliderStationing = (\n  value,\n  min,\n  max,\n  view,\n  range,\n  step = 1,\n  buttonRefs,\n  sliderLineRef,\n) => {\n  const [lineSizes, setLineSizes] = useState<Line[]>([]);\n  const [buttonPositions, setButtonPositions] = useState<number[]>([]);\n\n  const calcualtedStep = useMemo(() => {\n    if (!Array.isArray(step)) {\n      const val = Math.abs((max - min) / COUNT_STEPS);\n      if (val > step) {\n        return val - (val % step);\n      }\n      return Math.max(val, step);\n    }\n    return step;\n  }, [max, min, step]);\n\n  const calculateLines = () => {\n    const sizesArray: Line[] = [];\n    const absoluteSize = Math.abs(max - min);\n    if (typeof value !== 'undefined') {\n      if (view === 'default') {\n        if (!Array.isArray(value) && typeof value === 'number') {\n          sizesArray.push({\n            width: (1 - (max - value) / absoluteSize) * 100,\n            active: true,\n          });\n          sizesArray.push({\n            width: ((max - value) / absoluteSize) * 100,\n            active: false,\n          });\n        } else if (Array.isArray(value) && value) {\n          const endPointArray = [...value];\n          endPointArray.unshift(min);\n          endPointArray.push(max);\n          for (let i = 0; i < endPointArray.length - 1; i++) {\n            sizesArray.push({\n              width:\n                ((endPointArray[i + 1] - endPointArray[i]) / absoluteSize) *\n                100,\n              active:\n                endPointArray[i] >= value[0] &&\n                endPointArray[i + 1] <= value[1],\n            });\n          }\n        } else {\n          sizesArray.push({\n            width: 100,\n            active: false,\n          });\n        }\n      } else if (typeof calcualtedStep !== 'undefined') {\n        getSteps(calcualtedStep, min, max).forEach((stepSize) => {\n          sizesArray.push({\n            width: (Math.abs(stepSize.max - stepSize.min) * 100) / absoluteSize,\n            active:\n              (typeof value === 'number' || Array.isArray(value)) &&\n              (range && Array.isArray(value)\n                ? stepSize.max > value[0] &&\n                  stepSize.min < value[value.length - 1]\n                : stepSize.max <= value),\n          });\n        });\n      }\n    } else {\n      sizesArray.push({\n        width: 100,\n        active: false,\n      });\n    }\n    return sizesArray;\n  };\n\n  const getValidValue = (value: number) => {\n    if (value < min) return min;\n    if (value > max) return max;\n    return value;\n  };\n\n  const calculateButtonPositions = useCallback(() => {\n    const absoluteSize = Math.abs(max - min);\n    let defaultPaddingValue = 0;\n    const positions: number[] = [];\n    buttonRefs.forEach((buttonRef, index) => {\n      if (\n        buttonRef.current &&\n        buttonRef.current.offsetWidth &&\n        sliderLineRef.current &&\n        sliderLineRef.current.offsetWidth\n      ) {\n        defaultPaddingValue =\n          (absoluteSize * buttonRef.current.offsetWidth) /\n            (2 * sliderLineRef.current.offsetWidth) || 0;\n      }\n      if (typeof value === 'number' || Array.isArray(value)) {\n        positions.push(\n          typeof value === 'number'\n            ? (1 -\n                (max - getValidValue(value) + defaultPaddingValue) /\n                  absoluteSize) *\n                100\n            : (1 -\n                (max - getValidValue(value[index]) + defaultPaddingValue) /\n                  absoluteSize) *\n                100,\n        );\n      }\n    });\n    return positions;\n  }, [buttonRefs, sliderLineRef]);\n\n  useEffect(() => {\n    setLineSizes(calculateLines());\n    setButtonPositions(calculateButtonPositions());\n  }, [value, min, max, range, calcualtedStep, view]);\n\n  return {\n    lineSizes,\n    buttonPositions,\n  };\n};\n"],"mappings":"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"}