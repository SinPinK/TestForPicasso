{"version":3,"file":"Collapse.js","names":["IconArrowDown","React","useRef","useComponentSize","useForkRef","cn","usePropsHandler","Text","CollapseIcon","collapsePropCloseDirectionIconDefault","collapsePropDirectionIconDefault","collapsePropIconPositionDefault","collapsePropIconViewDefault","collapsePropSizeDefault","collapsePropViewDefault","COMPONENT_NAME","cnCollapse","sizeIconMap","renderSide","side","sides","Array","isArray","map","item","index","getMaxHeight","height","maxHeight","Collapse","forwardRef","props","ref","collapseRef","contentRef","contentHeight","label","size","view","className","maxContentHeight","isOpen","children","hoverEffect","divider","icon","closeIcon","rightSide","horizontalSpace","iconPosition","directionIcon","closeDirectionIcon","style","iconView","otherProps","position"],"sources":["../../../../../src/components/Collapse/Collapse.tsx"],"sourcesContent":["import './Collapse.css';\n\nimport { IconArrowDown } from '@consta/icons/IconArrowDown';\nimport React, { useRef } from 'react';\n\nimport { useComponentSize } from '##/hooks/useComponentSize';\nimport { useForkRef } from '##/hooks/useForkRef/useForkRef';\nimport { cn } from '##/utils/bem';\n\nimport { usePropsHandler } from '../EventInterceptor/usePropsHandler';\nimport { Text } from '../Text/Text';\nimport { CollapseIcon } from './CollapseIcon/CollapseIcon';\nimport {\n  CollapseComponent,\n  collapsePropCloseDirectionIconDefault,\n  collapsePropDirectionIconDefault,\n  collapsePropIconPositionDefault,\n  collapsePropIconViewDefault,\n  CollapseProps,\n  CollapsePropSize,\n  collapsePropSizeDefault,\n  collapsePropViewDefault,\n} from './types';\n\nexport const COMPONENT_NAME = 'Collapse' as const;\n\nexport const cnCollapse = cn('Collapse');\n\nexport const sizeIconMap: Record<CollapsePropSize, 'xs' | 's'> = {\n  '2xs': 'xs',\n  'xs': 'xs',\n  's': 'xs',\n  'm': 's',\n  'l': 's',\n};\n\nfunction renderSide(side: React.ReactNode): React.ReactNode {\n  const sides = side ? [...(Array.isArray(side) ? side : [side])] : [];\n\n  return sides.map((item, index) => (\n    <div className={cnCollapse('Side')} key={index}>\n      {item}\n    </div>\n  ));\n}\n\nconst getMaxHeight = (height: number, maxHeight?: number | string) => {\n  if (maxHeight) {\n    return typeof maxHeight === 'string' ? maxHeight : `${maxHeight}px`;\n  }\n  return `${height}px`;\n};\n\nexport const Collapse: CollapseComponent = React.forwardRef<\n  HTMLDivElement,\n  CollapseProps\n>((props, ref) => {\n  const collapseRef = useRef<HTMLDivElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const { height: contentHeight } = useComponentSize(contentRef);\n\n  const {\n    label,\n    size = collapsePropSizeDefault,\n    view = collapsePropViewDefault,\n    className,\n    maxContentHeight,\n    isOpen,\n    children,\n    hoverEffect,\n    divider,\n    icon = IconArrowDown,\n    closeIcon,\n    rightSide,\n    horizontalSpace,\n    iconPosition = collapsePropIconPositionDefault,\n    directionIcon = collapsePropDirectionIconDefault,\n    closeDirectionIcon = collapsePropCloseDirectionIconDefault,\n    style,\n    iconView = collapsePropIconViewDefault,\n    ...otherProps\n  } = usePropsHandler(COMPONENT_NAME, props, collapseRef);\n\n  return (\n    <div\n      ref={useForkRef([ref, collapseRef])}\n      className={cnCollapse({ size, view }, [className])}\n      style={{\n        ...style,\n        ['--horizontal-space' as string]: horizontalSpace\n          ? `var(--space-${horizontalSpace})`\n          : 0,\n      }}\n    >\n      <div\n        className={cnCollapse('Label', {\n          hoverEffect,\n          iconPosition,\n          view,\n        })}\n        {...otherProps}\n      >\n        <CollapseIcon\n          className={cnCollapse('Icon', { position: iconPosition })}\n          size={sizeIconMap[size]}\n          icon={icon}\n          closeIcon={closeIcon}\n          isOpen={isOpen}\n          direction={directionIcon}\n          closeDirection={closeDirectionIcon}\n          view={iconView}\n        />\n        {typeof label === 'object' ? (\n          <div className={cnCollapse('LabelText')}>{label}</div>\n        ) : (\n          <Text className={cnCollapse('LabelText')} view={view} size={size}>\n            {label}\n          </Text>\n        )}\n        {iconPosition === 'left' && renderSide(rightSide)}\n      </div>\n      <div\n        style={{\n          ['--collapse-body-max-height' as string]: getMaxHeight(\n            contentHeight,\n            maxContentHeight,\n          ),\n        }}\n        className={cnCollapse('Body', { isOpen, divider })}\n      >\n        <div ref={contentRef} className={cnCollapse('Content')}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport * from './types';\n"],"mappings":"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"}