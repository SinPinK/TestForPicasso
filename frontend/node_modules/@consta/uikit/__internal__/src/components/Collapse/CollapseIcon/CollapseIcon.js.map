{"version":3,"file":"CollapseIcon.js","names":["cnIcon","React","useRef","Transition","cn","cnCollapseIcon","animateTimeout","CollapseIconButton","children","className","size","GuardFragment","props","CollapseIcon","Icon","icon","CloseIcon","closeIcon","direction","closeDirection","isOpen","view","otherProps","iconRef","closeIconRef","Wrapper","wrapperClassName","renderIconClassName","renderIcon","animate"],"sources":["../../../../../../src/components/Collapse/CollapseIcon/CollapseIcon.tsx"],"sourcesContent":["import './CollapseIcon.css';\n\nimport { cnIcon } from '@consta/icons/Icon';\nimport React, { useRef } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport { cn } from '##/utils/bem';\n\nimport { CollapseIconProps } from '../types';\n\nconst cnCollapseIcon = cn('CollapseIcon');\nconst animateTimeout = 300;\n\nconst CollapseIconButton = ({\n  children,\n  className,\n  size,\n}: {\n  children?: React.ReactNode;\n  className?: string;\n  size: CollapseIconProps['size'];\n}) => {\n  return (\n    <div className={cnCollapseIcon('Button', { size }, [className])}>\n      {children}\n    </div>\n  );\n};\n\nconst GuardFragment = (props: { children?: React.ReactNode }) => (\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  <>{props.children}</>\n);\n\nexport const CollapseIcon: React.FC<CollapseIconProps> = (props) => {\n  const {\n    size,\n    icon: Icon,\n    closeIcon: CloseIcon,\n    direction,\n    closeDirection,\n    isOpen,\n    className,\n    view,\n    ...otherProps\n  } = props;\n\n  const iconRef = useRef<HTMLSpanElement>(null);\n  const closeIconRef = useRef<HTMLSpanElement>(null);\n\n  const Wrapper = view === 'ghost' ? CollapseIconButton : GuardFragment;\n  const wrapperClassName = view === 'ghost' ? className : undefined;\n  const renderIconClassName = view === 'clear' ? className : undefined;\n\n  const renderIcon = () => {\n    if (CloseIcon) {\n      return (\n        <span\n          className={cnCollapseIcon('Wrapper', [\n            cnIcon({ size }),\n            renderIconClassName,\n          ])}\n        >\n          <Transition\n            in={!isOpen}\n            unmountOnExit\n            timeout={animateTimeout}\n            nodeRef={iconRef}\n          >\n            {(animate) => (\n              <Icon\n                {...otherProps}\n                className={cnCollapseIcon({ animate, view })}\n                size={size}\n                ref={iconRef}\n              />\n            )}\n          </Transition>\n          <Transition\n            in={isOpen}\n            unmountOnExit\n            timeout={animateTimeout}\n            nodeRef={closeIconRef}\n          >\n            {(animate) => (\n              <CloseIcon\n                {...otherProps}\n                className={cnCollapseIcon({ animate, view })}\n                size={size}\n                ref={closeIconRef}\n              />\n            )}\n          </Transition>\n        </span>\n      );\n    }\n    return (\n      <Icon\n        {...otherProps}\n        className={cnCollapseIcon({ isOpen, direction, closeDirection, view }, [\n          renderIconClassName,\n        ])}\n        size={size}\n      />\n    );\n  };\n\n  return (\n    <Wrapper size={size} className={wrapperClassName}>\n      {renderIcon()}\n    </Wrapper>\n  );\n};\n"],"mappings":"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"}