{"version":3,"file":"Select.js","names":["IconSelect","React","forwardRef","useRef","useForkRef","useSelect","usePropsHandler","cnSelect","COMPONENT_NAME","defaultLabelForEmptyItems","SelectContainer","SelectDropdown","SelectItem","defaultPropForm","defaultPropSize","defaultPropView","withDefaultGetters","SelectRender","props","ref","defaultDropdownRef","controlRef","placeholder","onBlur","onFocus","items","onChange","value","required","disabled","ariaLabel","id","dropdownRef","form","view","size","dropdownClassName","name","groups","getItemLabel","labelForEmptyItems","getItemKey","getItemGroupKey","getItemDisabled","getGroupKey","getGroupLabel","renderItem","isLoading","renderValueProp","renderValue","inputRefProp","inputRef","style","dropdownForm","restProps","multiple","getKeyProps","getOptionProps","isOpen","visibleItems","isFocused","handleInputFocus","handleInputBlur","handleToggleDropdown","handleInputClick","notFound","hasItems","renderValueDefault","label","item","renderItemDefault","active","hovered","onClick","onMouseEnter","zIndex","Select"],"sources":["../../../../../src/components/Select/Select.tsx"],"sourcesContent":["import '../SelectComponents/Select.css';\n\nimport { IconSelect } from '@consta/icons/IconSelect';\nimport React, { forwardRef, useRef } from 'react';\n\nimport { useForkRef } from '../../hooks/useForkRef/useForkRef';\nimport { useSelect } from '../../hooks/useSelect/useSelect';\nimport { usePropsHandler } from '../EventInterceptor/usePropsHandler';\nimport { cnSelect, COMPONENT_NAME } from '../SelectComponents/cnSelect';\nimport { defaultLabelForEmptyItems } from '../SelectComponents/helpers';\nimport { SelectContainer } from '../SelectComponents/SelectContainer/SelectContainer';\nimport { SelectDropdown } from '../SelectComponents/SelectDropdown/SelectDropdown';\nimport { SelectItem } from '../SelectComponents/SelectItem/SelectItem';\nimport {\n  defaultPropForm,\n  defaultPropSize,\n  defaultPropView,\n} from '../SelectComponents/types';\nimport {\n  DefaultGroup,\n  DefaultItem,\n  PropRenderItem,\n  PropRenderValue,\n  SelectComponent,\n  SelectProps,\n  withDefaultGetters,\n} from './helpers';\n\nconst SelectRender = <ITEM = DefaultItem, GROUP = DefaultGroup>(\n  props: SelectProps<ITEM, GROUP>,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const defaultDropdownRef = useRef<HTMLDivElement | null>(null);\n  const controlRef = useRef<HTMLDivElement | null>(null);\n\n  const {\n    placeholder,\n    onBlur,\n    onFocus,\n    items,\n    onChange,\n    value,\n    required,\n    disabled,\n    ariaLabel,\n    id,\n    dropdownRef = defaultDropdownRef,\n    form = defaultPropForm,\n    view = defaultPropView,\n    size = defaultPropSize,\n    dropdownClassName,\n    name,\n    groups = [],\n    getItemLabel,\n    labelForEmptyItems = defaultLabelForEmptyItems,\n    getItemKey,\n    getItemGroupKey,\n    getItemDisabled,\n    getGroupKey,\n    getGroupLabel,\n    renderItem,\n    isLoading,\n    renderValue: renderValueProp,\n    inputRef: inputRefProp,\n    style,\n    dropdownForm = 'default',\n    ...restProps\n  } = usePropsHandler(COMPONENT_NAME, withDefaultGetters(props), controlRef);\n\n  const {\n    getKeyProps,\n    getOptionProps,\n    isOpen,\n    visibleItems,\n    isFocused,\n    handleInputFocus,\n    handleInputBlur,\n    handleToggleDropdown,\n    inputRef,\n    handleInputClick,\n    notFound,\n    hasItems,\n  } = useSelect<ITEM, GROUP, false>({\n    items,\n    groups,\n    value,\n    onChange,\n    dropdownRef,\n    controlRef,\n    disabled,\n    getItemLabel,\n    getItemKey,\n    getGroupKey,\n    getItemGroupKey,\n    getItemDisabled,\n    multiple: false,\n    onBlur,\n    onFocus,\n  });\n\n  const renderItemDefault: PropRenderItem<ITEM> = (props) => {\n    const { item, active, hovered, onClick, onMouseEnter } = props;\n\n    return (\n      <SelectItem\n        label={getItemLabel(item)}\n        active={active}\n        hovered={hovered}\n        multiple={false}\n        size={size}\n        indent={dropdownForm === 'round' ? 'increased' : 'normal'}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        disabled={getItemDisabled(item)}\n      />\n    );\n  };\n\n  const renderValueDefault: PropRenderValue<ITEM> = (props) => {\n    const label = getItemLabel(props.item);\n\n    return (\n      <span className={cnSelect('ControlValue')} title={label}>\n        {label}\n      </span>\n    );\n  };\n\n  const renderValue = renderValueProp || renderValueDefault;\n\n  return (\n    <>\n      <SelectContainer\n        focused={isFocused}\n        disabled={disabled}\n        size={size}\n        view={view}\n        form={form}\n        required={required}\n        ref={ref}\n        style={style}\n        {...restProps}\n      >\n        <div\n          className={cnSelect('Control')}\n          ref={controlRef}\n          aria-expanded={isOpen}\n          aria-haspopup=\"listbox\"\n          id={id}\n        >\n          <div className={cnSelect('ControlInner')}>\n            <div className={cnSelect('ControlValueContainer')}>\n              <input\n                {...getKeyProps()}\n                type=\"button\"\n                name={name}\n                onFocus={handleInputFocus}\n                onBlur={handleInputBlur}\n                aria-label={ariaLabel}\n                onClick={handleInputClick}\n                ref={useForkRef([inputRef, inputRefProp])}\n                className={cnSelect('FakeField')}\n                readOnly\n              />\n              {value && renderValue({ item: value })}\n              {(typeof value === 'undefined' || value === null) && placeholder && (\n                <span className={cnSelect('Placeholder')} title=\"placeholder\">\n                  {placeholder}\n                </span>\n              )}\n            </div>\n          </div>\n          <span className={cnSelect('Indicators')}>\n            <button\n              type=\"button\"\n              className={cnSelect('IndicatorsDropdown')}\n              tabIndex={-1}\n              onClick={handleToggleDropdown}\n            >\n              <IconSelect\n                size=\"xs\"\n                className={cnSelect('DropdownIndicatorIcon')}\n              />\n            </button>\n          </span>\n        </div>\n      </SelectContainer>\n      <SelectDropdown\n        isOpen={isOpen}\n        size={size}\n        controlRef={controlRef}\n        getOptionProps={getOptionProps}\n        dropdownRef={dropdownRef}\n        form={dropdownForm}\n        className={dropdownClassName}\n        renderItem={renderItem || renderItemDefault}\n        getGroupLabel={getGroupLabel}\n        visibleItems={visibleItems}\n        notFound={notFound}\n        isLoading={isLoading}\n        labelForEmptyItems={labelForEmptyItems}\n        hasItems={hasItems}\n        style={\n          typeof style?.zIndex === 'number'\n            ? { zIndex: style.zIndex + 1 }\n            : undefined\n        }\n      />\n    </>\n  );\n};\n\nexport const Select = forwardRef(SelectRender) as SelectComponent;\n\nexport * from './helpers';\n"],"mappings":"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"}