{"version":3,"file":"StepsDeprecated.js","names":["IconArrowLeft","IconArrowRight","React","useMemo","useRef","useState","useChoiceGroup","useOverflow","useScrollElements","cn","Button","StepsStep","stepsSizes","stepsDefaultSize","cnSteps","Steps","forwardRef","props","ref","size","items","value","getLabel","getDisabled","getCompleted","getSkipped","onChange","className","otherProps","activeStep","setActiveStep","getKey","callBack","multiple","getOnChange","getChecked","forEach","item","index","refs","scrollTo","stepsRef","isOverflow","currentRef","changeStep","e","prev","length","side","map"],"sources":["../../../../../src/components/StepsDeprecated/StepsDeprecated.tsx"],"sourcesContent":["import './Steps.css';\n\nimport { IconArrowLeft } from '@consta/icons/IconArrowLeft';\nimport { IconArrowRight } from '@consta/icons/IconArrowRight';\nimport React, { useMemo, useRef, useState } from 'react';\n\nimport { useChoiceGroup } from '../../hooks/useChoiceGroup/useChoiceGroup';\nimport { useOverflow } from '../../hooks/useOverflow/useOverflow';\nimport { useScrollElements } from '../../hooks/useScrollElements/useScrollElements';\nimport { cn } from '../../utils/bem';\nimport { PropsWithHTMLAttributesAndRef } from '../../utils/types/PropsWithHTMLAttributes';\nimport { Button } from '../Button/Button';\nimport { StepsStep } from './StepsStep/StepsStep';\n\nexport const stepsSizes = ['m', 'l'] as const;\nexport type StepsPropSize = typeof stepsSizes[number];\nexport const stepsDefaultSize: StepsPropSize = stepsSizes[0];\n\nexport type StepsPropGetLabel<ITEM> = (item: ITEM) => string;\nexport type StepsPropGetCommon<ITEM> = (item: ITEM) => boolean;\nexport type StepsPropOnChange<ITEM> = (props: {\n  e: React.MouseEvent;\n  value: ITEM;\n}) => void;\n\ntype Props<ITEM> = {\n  size?: StepsPropSize;\n  items: ITEM[];\n  value: ITEM;\n  getLabel: StepsPropGetLabel<ITEM>;\n  getDisabled?: StepsPropGetCommon<ITEM>;\n  getCompleted?: StepsPropGetCommon<ITEM>;\n  getSkipped?: StepsPropGetCommon<ITEM>;\n  onChange: StepsPropOnChange<ITEM>;\n  className?: string;\n};\n\ntype Steps = <ITEM>(\n  props: PropsWithHTMLAttributesAndRef<Props<ITEM>, HTMLDivElement>,\n) => React.ReactElement | null;\n\nexport const cnSteps = cn('Steps');\n\nexport const Steps: Steps = React.forwardRef((props, ref) => {\n  const {\n    size = stepsDefaultSize,\n    items,\n    value,\n    getLabel,\n    getDisabled,\n    getCompleted,\n    getSkipped,\n    onChange,\n    className,\n    ...otherProps\n  } = props;\n\n  const [activeStep, setActiveStep] = useState<number>(-1);\n\n  const { getOnChange, getChecked } = useChoiceGroup({\n    value,\n    getKey: getLabel,\n    callBack: onChange,\n    multiple: false,\n  });\n\n  useMemo(() => {\n    items.forEach((item, index) => {\n      if (getChecked(item)) {\n        setActiveStep(index);\n      }\n    });\n  }, [items, value]);\n\n  const { refs, scrollTo } = useScrollElements(items);\n\n  const stepsRef = useRef<HTMLDivElement>(null);\n\n  const isOverflow = useOverflow({ currentRef: stepsRef });\n\n  const changeStep = (e: React.MouseEvent, prev: boolean) => {\n    if (prev && activeStep !== 0) {\n      getOnChange(items[activeStep - 1])(e);\n      scrollTo(activeStep - 1);\n    }\n    if (!prev && activeStep !== items.length - 1) {\n      getOnChange(items[activeStep + 1])(e);\n      scrollTo(activeStep + 1);\n    }\n  };\n\n  return (\n    <div ref={ref} className={cnSteps({ size }, [className])} {...otherProps}>\n      {isOverflow && (\n        <Button\n          iconLeft={() => <IconArrowLeft size=\"xs\" />}\n          view=\"clear\"\n          onlyIcon\n          size=\"xs\"\n          className={cnSteps('Button', { side: 'left' })}\n          onClick={(e) => changeStep(e, true)}\n        />\n      )}\n      <div ref={stepsRef} className={cnSteps('List')}>\n        {items.map((item, index) => (\n          <StepsStep\n            key={index}\n            ref={refs[index] as React.RefObject<HTMLButtonElement>}\n            className={cnSteps('Item')}\n            label={\n              getCompleted?.(item)\n                ? getLabel(item)\n                : `${index + 1} ${getLabel(item)}`\n            }\n            size={size}\n            active={activeStep === index}\n            onChange={getOnChange(item)}\n            completed={getCompleted?.(item)}\n            skipped={getSkipped?.(item)}\n            disabled={getDisabled?.(item)}\n          />\n        ))}\n      </div>\n      {isOverflow && (\n        <Button\n          iconLeft={() => <IconArrowRight size=\"xs\" />}\n          view=\"clear\"\n          onlyIcon\n          size=\"xs\"\n          className={cnSteps('Button', { side: 'right' })}\n          onClick={(e) => changeStep(e, false)}\n        />\n      )}\n    </div>\n  );\n});\n"],"mappings":"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"}