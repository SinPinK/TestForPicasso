{"version":3,"file":"useCurrentVisibleDate.js","names":["useEffect","useMemo","useState","isDateInRange","calculateCurrentVisibleDate","currentVisibleDate","minDate","maxDate","value","Array","isArray","currentDate","Date","minDateTime","getTime","currentDateTime","maxDateTime","getCurrentVisibleDate","props","startOfUnit","useCurrentVisibleDate","state","onChangeCurrentVisibleDate"],"sources":["../../../../../../src/components/DateTime/helpers/useCurrentVisibleDate.ts"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\n\nimport { DateRange } from '../../../utils/types/Date';\nimport { isDateInRange } from './isDateInRange';\n\ntype GetCurrentVisibleDateProps = {\n  currentVisibleDate: Date | undefined;\n  minDate: Date | undefined;\n  maxDate: Date | undefined;\n  value: Date | DateRange | undefined | null;\n  startOfUnit: (date: Date) => Date;\n  onChangeCurrentVisibleDate?: (date: Date) => void;\n};\n\nexport type UseCurrentVisibleDateProps = GetCurrentVisibleDateProps & {\n  onChangeCurrentVisibleDate?: (date: Date) => void;\n};\n\nconst calculateCurrentVisibleDate = ({\n  currentVisibleDate,\n  minDate,\n  maxDate,\n  value,\n}: GetCurrentVisibleDateProps): Date => {\n  if (currentVisibleDate) {\n    return currentVisibleDate;\n  }\n\n  if (Array.isArray(value) && value[0]) {\n    return value[0];\n  }\n\n  if (Array.isArray(value) && value[1]) {\n    return value[1];\n  }\n\n  if (value && !Array.isArray(value)) {\n    return value;\n  }\n\n  const currentDate = new Date();\n\n  if (minDate && maxDate && !isDateInRange(currentDate, [minDate, maxDate])) {\n    return minDate;\n  }\n\n  if (minDate && !maxDate) {\n    const minDateTime = minDate.getTime();\n    const currentDateTime = currentDate.getTime();\n    if (currentDateTime < minDateTime) {\n      return minDate;\n    }\n  }\n\n  if (!minDate && maxDate) {\n    const maxDateTime = maxDate.getTime();\n    const currentDateTime = currentDate.getTime();\n    if (currentDateTime > maxDateTime) {\n      return maxDate;\n    }\n  }\n\n  return currentDate;\n};\n\nexport const getCurrentVisibleDate = (\n  props: GetCurrentVisibleDateProps,\n): Date => props.startOfUnit(calculateCurrentVisibleDate(props));\n\nexport const useCurrentVisibleDate = (props: UseCurrentVisibleDateProps) => {\n  const currentVisibleDate = useMemo(() => {\n    return getCurrentVisibleDate(props);\n  }, [\n    props.currentVisibleDate?.getTime() || 0,\n    props.minDate?.getTime() || 0,\n    props.maxDate?.getTime() || 0,\n  ]);\n\n  const state = useState<Date>(currentVisibleDate);\n\n  useEffect(() => state[1](currentVisibleDate), [currentVisibleDate.getTime()]);\n\n  useEffect(\n    () => state[0] && props.onChangeCurrentVisibleDate?.(state[0]),\n    [state[0]?.getTime()],\n  );\n\n  return state;\n};\n"],"mappings":"AAAA,OAASA,SAAT,CAAoBC,OAApB,CAA6BC,QAA7B,KAA6C,OAA7C,CAGA,OAASC,aAAT,uBAeA,GAAMC,4BAA2B,CAAG,WAKI,IAJtCC,EAIsC,GAJtCA,kBAIsC,CAHtCC,CAGsC,GAHtCA,OAGsC,CAFtCC,CAEsC,GAFtCA,OAEsC,CADtCC,CACsC,GADtCA,KACsC,CACtC,GAAIH,CAAJ,CACE,MAAOA,EAAP,CAGF,GAAII,KAAK,CAACC,OAAN,CAAcF,CAAd,GAAwBA,CAAK,CAAC,CAAD,CAAjC,CACE,MAAOA,EAAK,CAAC,CAAD,CAAZ,CAGF,GAAIC,KAAK,CAACC,OAAN,CAAcF,CAAd,GAAwBA,CAAK,CAAC,CAAD,CAAjC,CACE,MAAOA,EAAK,CAAC,CAAD,CAAZ,CAGF,GAAIA,CAAK,EAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,CAAd,CAAd,CACE,MAAOA,EAAP,CAGF,GAAMG,EAAW,CAAG,GAAIC,KAAxB,CAEA,GAAIN,CAAO,EAAIC,CAAX,EAAsB,CAACJ,aAAa,CAACQ,CAAD,CAAc,CAACL,CAAD,CAAUC,CAAV,CAAd,CAAxC,CACE,MAAOD,EAAP,CAGF,GAAIA,CAAO,EAAI,CAACC,CAAhB,CAAyB,IACjBM,EAAW,CAAGP,CAAO,CAACQ,OAAR,EADG,CAEjBC,CAAe,CAAGJ,CAAW,CAACG,OAAZ,EAFD,CAGvB,GAAIC,CAAe,CAAGF,CAAtB,CACE,MAAOP,EAEV,CAED,GAAI,CAACA,CAAD,EAAYC,CAAhB,CAAyB,IACjBS,EAAW,CAAGT,CAAO,CAACO,OAAR,EADG,CAEjBC,CAAe,CAAGJ,CAAW,CAACG,OAAZ,EAFD,CAGvB,GAAIC,CAAe,CAAGC,CAAtB,CACE,MAAOT,EAEV,CAED,MAAOI,EACR,CA7CD,CA+CA,MAAO,IAAMM,sBAAqB,CAAG,SACnCC,CADmC,QAE1BA,EAAK,CAACC,WAAN,CAAkBf,2BAA2B,CAACc,CAAD,CAA7C,CAF0B,CAA9B,CAIP,MAAO,IAAME,sBAAqB,CAAG,SAACF,CAAD,CAAuC,aACpEb,CAAkB,CAAGJ,OAAO,CAAC,UAAM,CACvC,MAAOgB,sBAAqB,CAACC,CAAD,CAC7B,CAFiC,CAE/B,CACD,WAAAA,CAAK,CAACb,kBAAN,uBAA0BS,OAA1B,KAAuC,CADtC,CAED,WAAAI,CAAK,CAACZ,OAAN,uBAAeQ,OAAf,KAA4B,CAF3B,CAGD,WAAAI,CAAK,CAACX,OAAN,uBAAeO,OAAf,KAA4B,CAH3B,CAF+B,CADwC,CASpEO,CAAK,CAAGnB,QAAQ,CAAOG,CAAP,CAToD,CAkB1E,MAPAL,UAAS,CAAC,iBAAMqB,EAAK,CAAC,CAAD,CAAL,CAAShB,CAAT,CAAN,CAAD,CAAqC,CAACA,CAAkB,CAACS,OAAnB,EAAD,CAArC,CAOT,CALAd,SAAS,CACP,uBAAMqB,EAAK,CAAC,CAAD,CAAL,aAAYH,CAAK,CAACI,0BAAlB,qBAAY,OAAAJ,CAAK,CAA8BG,CAAK,CAAC,CAAD,CAAnC,CAAjB,CAAN,CADO,CAEP,WAACA,CAAK,CAAC,CAAD,CAAN,qBAAC,EAAUP,OAAV,EAAD,CAFO,CAKT,CAAOO,CACR,CAnBM"}