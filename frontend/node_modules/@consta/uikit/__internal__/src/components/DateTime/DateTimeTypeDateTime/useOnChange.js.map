{"version":3,"file":"useOnChange.js","names":["getHours","getMinutes","getSeconds","set","useCallback","useEffect","useState","useMutableRef","getTime","date","useOnChange","onChange","onChangeRange","value","timeFor","normalizeValue","Array","isArray","time","setTime","onChangeRef","onChangeRangeRef","timeRef","onDateChange","e","current","hours","minutes","seconds","onDateChangeRange","onTimeChange"],"sources":["../../../../../../src/components/DateTime/DateTimeTypeDateTime/useOnChange.ts"],"sourcesContent":["import { getHours, getMinutes, getSeconds, set } from 'date-fns';\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { useMutableRef } from '../../../hooks/useMutableRef/useMutableRef';\nimport { DateRange } from '../../../utils/types/Date';\nimport { DateTimePropOnChange, DateTimePropOnChangeRange } from '../helpers';\n\nconst getTime = (date?: Date) => {\n  if (!date) {\n    return [0, 0, 0] as const;\n  }\n  return [getHours(date), getMinutes(date), getSeconds(date)] as const;\n};\n\nexport const useOnChange = (\n  onChange: DateTimePropOnChange | undefined,\n  onChangeRange: DateTimePropOnChangeRange<'date-time'> | undefined,\n  value: DateRange | Date | undefined,\n  timeFor: 'start' | 'end',\n): [\n  DateTimePropOnChange,\n  DateTimePropOnChangeRange<'date-time'>,\n  DateTimePropOnChange,\n  Date | undefined,\n] => {\n  const normalizeValue = Array.isArray(value)\n    ? value[timeFor === 'start' ? 0 : 1]\n    : value;\n\n  const [time, setTime] = useState<Date | undefined>(normalizeValue);\n\n  const onChangeRef = useMutableRef(onChange);\n  const onChangeRangeRef = useMutableRef(onChangeRange);\n  const timeRef = useMutableRef(time);\n\n  const onDateChange: DateTimePropOnChange = useCallback(({ e, value }) => {\n    const [hours, minutes, seconds] = getTime(timeRef.current);\n    onChangeRef.current?.({\n      e,\n      value: set(value, { hours, minutes, seconds }),\n    });\n  }, []);\n\n  const onDateChangeRange: DateTimePropOnChangeRange<'date-time'> = useCallback(\n    ({ e, value }) => {\n      const [hours, minutes, seconds] = getTime(timeRef.current);\n      onChangeRangeRef.current?.({\n        e,\n        value: [\n          value[0] ? set(value[0], { hours, minutes, seconds }) : undefined,\n          value[1] ? set(value[1], { hours, minutes, seconds }) : undefined,\n        ],\n      });\n    },\n    [],\n  );\n\n  const onTimeChange: DateTimePropOnChange = useCallback(({ e, value }) => {\n    onChangeRef.current?.({ e, value });\n  }, []);\n\n  useEffect(() => setTime(normalizeValue), [normalizeValue?.getTime()]);\n\n  return [onDateChange, onDateChangeRange, onTimeChange, normalizeValue];\n};\n"],"mappings":"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"}