{"version":3,"file":"TabsFitModeDropdownWrapper.js","names":["React","cn","getTabsWidth","TabsMoreItems","useFittingItems","cnTabsFitModeDropdownWrapper","TabsFitModeDropdownWrapper","items","tabsDimensions","tabRefs","getLabel","getChecked","renderItem","renderItemsList","ref","useRef","moreItemsRef","containerRef","isItemHidden","hiddenItems","filter","_item","idx","maxTabHeight","useMemo","Math","max","map","tabRef","current","offsetHeight","checkedItemIsHidden","some","visibleTabsWidth","_td","height","withRunningLine","getTabClassName","hidden","length","left"],"sources":["../../../../../../src/components/TabsDeprecated/FitModeDropdownWrapper/TabsFitModeDropdownWrapper.tsx"],"sourcesContent":["import './TabsFitModeDropdownWrapper.css';\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/bem';\nimport { getTabsWidth, TabsFitModeWrapperProps } from '../helpers';\nimport { TabsMoreItems } from '../MoreItems/TabsMoreItems';\nimport { useFittingItems } from './useFittingItems';\n\nconst cnTabsFitModeDropdownWrapper = cn('TabsFitModeDropdownWrapper');\n\nexport const TabsFitModeDropdownWrapper = <ITEM,>({\n  items,\n  tabsDimensions,\n  tabRefs,\n  getLabel,\n  getChecked,\n  renderItem,\n  renderItemsList,\n}: TabsFitModeWrapperProps<ITEM>): React.ReactElement | null => {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const moreItemsRef = React.useRef<HTMLDivElement>(null);\n  const { isItemHidden } = useFittingItems({\n    tabsDimensions,\n    containerRef: ref,\n    moreItemsRef,\n  });\n  const hiddenItems = items.filter((_item, idx) => isItemHidden(idx));\n  const maxTabHeight: number = React.useMemo(() => {\n    return Math.max(\n      ...tabRefs.map((tabRef) => tabRef.current?.offsetHeight ?? 0),\n    );\n  }, [tabsDimensions]);\n  const checkedItemIsHidden = hiddenItems.some(getChecked);\n  const visibleTabsWidth = getTabsWidth(\n    tabsDimensions.filter((_td, idx) => !isItemHidden(idx)),\n  );\n\n  return (\n    <div\n      ref={ref}\n      className={cnTabsFitModeDropdownWrapper()}\n      style={{ height: maxTabHeight }}\n    >\n      <div className={cnTabsFitModeDropdownWrapper('Tabs')}>\n        {renderItemsList({\n          withRunningLine: !checkedItemIsHidden,\n          getTabClassName: (idx) =>\n            cnTabsFitModeDropdownWrapper('Tab', { hidden: isItemHidden(idx) }),\n        })}\n      </div>\n      {hiddenItems.length > 0 && (\n        <div\n          ref={moreItemsRef}\n          className={cnTabsFitModeDropdownWrapper('MoreItems')}\n          style={{\n            /* В Safari скрытые табы с абсолютом продолжают растягивать контейнер,\n            поэтому приходится позиционировать кнопку абсолютом */\n            left: visibleTabsWidth,\n          }}\n        >\n          <TabsMoreItems\n            items={hiddenItems}\n            renderItem={renderItem}\n            getLabel={getLabel}\n            getChecked={getChecked}\n            height={maxTabHeight}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"yEAAA,yCAEA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,EAAT,0BACA,OAASC,YAAT,kBACA,OAASC,aAAT,kCACA,OAASC,eAAT,yBAEA,GAAMC,6BAA4B,CAAGJ,EAAE,CAAC,4BAAD,CAAvC,CAEA,MAAO,IAAMK,2BAA0B,CAAG,WAQsB,IAP9DC,EAO8D,GAP9DA,KAO8D,CAN9DC,CAM8D,GAN9DA,cAM8D,CAL9DC,CAK8D,GAL9DA,OAK8D,CAJ9DC,CAI8D,GAJ9DA,QAI8D,CAH9DC,CAG8D,GAH9DA,UAG8D,CAF9DC,CAE8D,GAF9DA,UAE8D,CAD9DC,CAC8D,GAD9DA,eAC8D,CACxDC,CAAG,CAAGd,KAAK,CAACe,MAAN,CAA6B,IAA7B,CADkD,CAExDC,CAAY,CAAGhB,KAAK,CAACe,MAAN,CAA6B,IAA7B,CAFyC,GAGrCX,eAAe,CAAC,CACvCI,cAAc,CAAdA,CADuC,CAEvCS,YAAY,CAAEH,CAFyB,CAGvCE,YAAY,CAAZA,CAHuC,CAAD,CAHsB,CAGtDE,CAHsD,GAGtDA,YAHsD,CAQxDC,CAAW,CAAGZ,CAAK,CAACa,MAAN,CAAa,SAACC,CAAD,CAAQC,CAAR,QAAgBJ,EAAY,CAACI,CAAD,CAA5B,CAAb,CAR0C,CASxDC,CAAoB,CAAGvB,KAAK,CAACwB,OAAN,CAAc,UAAM,CAC/C,MAAOC,KAAI,CAACC,GAAL,OAAAD,IAAI,oBACNhB,CAAO,CAACkB,GAAR,CAAY,SAACC,CAAD,qCAAYA,CAAM,CAACC,OAAnB,qBAAY,EAAgBC,YAA5B,gBAA4C,CAA5C,CAAZ,CADM,EAGZ,CAJ4B,CAI1B,CAACtB,CAAD,CAJ0B,CATiC,CAcxDuB,CAAmB,CAAGZ,CAAW,CAACa,IAAZ,CAAiBrB,CAAjB,CAdkC,CAexDsB,CAAgB,CAAG/B,YAAY,CACnCM,CAAc,CAACY,MAAf,CAAsB,SAACc,CAAD,CAAMZ,CAAN,QAAc,CAACJ,CAAY,CAACI,CAAD,CAA3B,CAAtB,CADmC,CAfyB,CAmB9D,MACE,4BACE,GAAG,CAAER,CADP,CAEE,SAAS,CAAET,4BAA4B,EAFzC,CAGE,KAAK,CAAE,CAAE8B,MAAM,CAAEZ,CAAV,CAHT,EAKE,2BAAK,SAAS,CAAElB,4BAA4B,CAAC,MAAD,CAA5C,EACGQ,CAAe,CAAC,CACfuB,eAAe,CAAE,CAACL,CADH,CAEfM,eAAe,CAAE,yBAACf,CAAD,QACfjB,6BAA4B,CAAC,KAAD,CAAQ,CAAEiC,MAAM,CAAEpB,CAAY,CAACI,CAAD,CAAtB,CAAR,CADb,CAFF,CAAD,CADlB,CALF,CAYwB,CAArB,CAAAH,CAAW,CAACoB,MAAZ,EACC,2BACE,GAAG,CAAEvB,CADP,CAEE,SAAS,CAAEX,4BAA4B,CAAC,WAAD,CAFzC,CAGE,KAAK,CAAE,CAGLmC,IAAI,CAAEP,CAHD,CAHT,EASE,oBAAC,aAAD,EACE,KAAK,CAAEd,CADT,CAEE,UAAU,CAAEP,CAFd,CAGE,QAAQ,CAAEF,CAHZ,CAIE,UAAU,CAAEC,CAJd,CAKE,MAAM,CAAEY,CALV,EATF,CAbJ,CAiCH,CA7DM"}