{"version":3,"file":"TabsDeprecated.js","names":["React","createRef","useMemo","useChoiceGroup","useResizeObserved","cn","TabsFitModeDropdownWrapper","TabsFitModeScrollWrapper","getTabsDirection","TabsBorderLine","TabsRunningLine","cnTabsTab","TabsTab","tabsSizes","tabsDefaultSize","tabsViews","tabsDefaultView","tabsLinePositions","tabsDefaultLinePosition","tabsFitModes","tabsDefaultFitMode","cnTabs","renderItemDefault","props","onChange","otherProps","Tabs","forwardRef","ref","size","className","items","view","value","linePosition","fitMode","onlyIcon","getIcon","getLabel","iconSize","renderItem","renderItemProp","getKey","callBack","multiple","getOnChange","getChecked","tabsDirection","isVertical","tabRefs","Array","length","fill","map","tabsDimensions","el","gap","parseInt","getComputedStyle","activeTabIdx","findIndex","item","onClick","checked","label","toString","icon","Wrapper","getTabsWrapper","direction","renderItemsList","withRunningLine","getTabClassName","idx","OnlyListWrapper"],"sources":["../../../../../src/components/TabsDeprecated/TabsDeprecated.tsx"],"sourcesContent":["import './Tabs.css';\n\nimport { IconComponent, IconPropSize } from '@consta/icons/Icon';\nimport React, { createRef, useMemo } from 'react';\n\nimport { useChoiceGroup } from '../../hooks/useChoiceGroup/useChoiceGroup';\nimport { useResizeObserved } from '../../hooks/useResizeObserved/useResizeObserved';\nimport { cn } from '../../utils/bem';\nimport { PropsWithHTMLAttributesAndRef } from '../../utils/types/PropsWithHTMLAttributes';\nimport { TabsFitModeDropdownWrapper } from './FitModeDropdownWrapper/TabsFitModeDropdownWrapper';\nimport { TabsFitModeScrollWrapper } from './FitModeScrollWrapper/TabsFitModeScrollWrapper';\nimport {\n  getTabsDirection,\n  RenderItemsListProp,\n  TabDimensions,\n  TabsDirection,\n  TabsFitModeWrapperProps,\n} from './helpers';\nimport { TabsBorderLine, TabsRunningLine } from './Line/TabsLine';\nimport { cnTabsTab, TabsTab } from './Tab/TabsTab';\n\nexport const tabsSizes = ['m', 's', 'xs'] as const;\nexport type TabsPropSize = typeof tabsSizes[number];\nexport const tabsDefaultSize: TabsPropSize = tabsSizes[0];\n\nexport const tabsViews = ['bordered', 'clear'] as const;\nexport type TabsPropView = typeof tabsViews[number];\nexport const tabsDefaultView: TabsPropView = tabsViews[0];\n\nexport const tabsLinePositions = ['bottom', 'top', 'left', 'right'] as const;\nexport type TabsPropLinePosition = typeof tabsLinePositions[number];\nexport const tabsDefaultLinePosition: TabsPropLinePosition = 'bottom';\n\nexport const tabsFitModes = ['scroll', 'dropdown'] as const;\nexport type TabsPropFitMode = typeof tabsFitModes[number];\nexport const tabsDefaultFitMode: TabsPropFitMode = 'dropdown';\n\nexport type TabsPropGetLabel<ITEM> = (item: ITEM) => string | number;\nexport type TabsPropGetIcon<ITEM> = (item: ITEM) => IconComponent | undefined;\nexport type TabsPropOnChange<ITEM, ITEM_ELEMENT> = (props: {\n  e: React.MouseEvent<ITEM_ELEMENT>;\n  value: ITEM;\n}) => void;\n\ntype RenderItemProps<ITEM, ELEMENT extends HTMLElement> = {\n  item: ITEM;\n  onChange: React.MouseEventHandler<ELEMENT>;\n  checked: boolean;\n  label: string;\n  icon?: IconComponent;\n  size: TabsPropSize;\n  iconSize?: IconPropSize;\n  onlyIcon?: boolean;\n};\n\ntype RenderItem<ITEM, ELEMENT extends HTMLElement> = (\n  props: RenderItemProps<ITEM, ELEMENT>,\n) => React.ReactElement | null;\n\nexport type TabsProps<\n  ITEM,\n  ITEM_ELEMENT extends HTMLElement = HTMLButtonElement,\n> = PropsWithHTMLAttributesAndRef<\n  {\n    size?: TabsPropSize;\n    onlyIcon?: boolean;\n    view?: TabsPropView;\n    iconSize?: IconPropSize;\n    items: ITEM[];\n    value?: ITEM | null;\n    getIcon?: TabsPropGetIcon<ITEM>;\n    getLabel: TabsPropGetLabel<ITEM>;\n    children?: never;\n    onChange: TabsPropOnChange<ITEM, ITEM_ELEMENT>;\n    renderItem?: RenderItem<ITEM, ITEM_ELEMENT>;\n  } & (\n    | {\n        linePosition?: Extract<TabsPropLinePosition, 'bottom' | 'top'>;\n        fitMode?: 'dropdown' | 'scroll';\n      }\n    | {\n        linePosition: Extract<TabsPropLinePosition, 'left' | 'right'>;\n        fitMode?: never;\n      }\n  ),\n  HTMLDivElement\n>;\n\ntype Tabs = <ITEM, ITEMELEMENT extends HTMLElement = HTMLButtonElement>(\n  props: TabsProps<ITEM, ITEMELEMENT>,\n  ref: React.Ref<HTMLDivElement>,\n) => React.ReactElement | null;\n\nexport const cnTabs = cn('Tabs');\n\nfunction renderItemDefault<ITEM, ITEMELEMENT extends HTMLElement>(\n  props: RenderItemProps<ITEM, ITEMELEMENT>,\n): React.ReactElement {\n  const { onChange, ...otherProps } = props;\n  return (\n    <TabsTab\n      {...otherProps}\n      onChange={\n        onChange as unknown as React.MouseEventHandler<HTMLButtonElement>\n      }\n    />\n  );\n}\n\nexport const Tabs: Tabs = React.forwardRef((props, ref) => {\n  const {\n    size = tabsDefaultSize,\n    className,\n    items,\n    view = tabsDefaultView,\n    value,\n    linePosition = tabsDefaultLinePosition,\n    fitMode = tabsDefaultFitMode,\n    onlyIcon,\n    getIcon,\n    getLabel,\n    onChange,\n    iconSize,\n    renderItem: renderItemProp = renderItemDefault,\n    ...otherProps\n  } = props;\n\n  const { getOnChange, getChecked } = useChoiceGroup({\n    value: value || null,\n    getKey: getLabel,\n    callBack: onChange,\n    multiple: false,\n  });\n\n  const tabsDirection = getTabsDirection(linePosition);\n  const isVertical = tabsDirection === 'vertical';\n  const tabRefs = useMemo(\n    () =>\n      new Array(items.length).fill(null).map(() => createRef<HTMLDivElement>()),\n    [items, fitMode, isVertical],\n  );\n  const tabsDimensions = useResizeObserved(\n    tabRefs,\n    (el): TabDimensions => ({\n      size: el?.[isVertical ? 'offsetHeight' : 'offsetWidth'] ?? 0,\n      gap: el\n        ? parseInt(\n            getComputedStyle(el)[isVertical ? 'marginBottom' : 'marginRight'],\n            10,\n          )\n        : 0,\n    }),\n  );\n\n  const activeTabIdx = items.findIndex((item) => getChecked(item));\n\n  const renderItem = (item: typeof items[number], onClick?: () => void) =>\n    renderItemProp({\n      item,\n      onChange: (...args) => {\n        onClick?.();\n        getOnChange(item)(...args);\n      },\n      checked: getChecked(item),\n      label: getLabel(item).toString(),\n      icon: getIcon && getIcon(item),\n      onlyIcon,\n      size,\n      iconSize,\n    });\n\n  const renderItemsList: RenderItemsListProp = ({\n    withRunningLine = true,\n    getTabClassName,\n  }) => (\n    <div className={cnTabs('List', { direction: tabsDirection, linePosition })}>\n      {items.map((item, idx) => (\n        <div\n          ref={tabRefs[idx]}\n          key={getLabel(item)}\n          className={cnTabs('Tab', { direction: tabsDirection }, [\n            getTabClassName?.(idx),\n          ])}\n        >\n          {renderItem(item)}\n        </div>\n      ))}\n      {withRunningLine && (\n        <TabsRunningLine\n          linePosition={linePosition}\n          tabsDimensions={tabsDimensions}\n          activeTabIdx={activeTabIdx}\n        />\n      )}\n    </div>\n  );\n\n  const Wrapper = getTabsWrapper(tabsDirection, fitMode);\n\n  return (\n    <div\n      className={cnTabs({ size, view, direction: tabsDirection }, [className])}\n      ref={ref}\n      {...otherProps}\n    >\n      <Wrapper\n        tabRefs={tabRefs}\n        tabsDimensions={tabsDimensions}\n        renderItem={renderItem}\n        renderItemsList={renderItemsList}\n        getLabel={getLabel}\n        getChecked={getChecked}\n        items={items}\n      />\n      {view === 'bordered' && <TabsBorderLine linePosition={linePosition} />}\n    </div>\n  );\n});\n\nconst getTabsWrapper = (\n  tabsDirection: TabsDirection,\n  fitMode: TabsPropFitMode,\n) => {\n  if (tabsDirection === 'vertical') {\n    return OnlyListWrapper;\n  }\n\n  return fitMode === 'scroll'\n    ? TabsFitModeScrollWrapper\n    : TabsFitModeDropdownWrapper;\n};\n\nconst OnlyListWrapper = <ITEM,>({\n  renderItemsList,\n}: TabsFitModeWrapperProps<ITEM>): React.ReactElement | null => (\n  <>{renderItemsList({})}</>\n);\n\nexport { TabsTab, cnTabsTab };\n"],"mappings":"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"}