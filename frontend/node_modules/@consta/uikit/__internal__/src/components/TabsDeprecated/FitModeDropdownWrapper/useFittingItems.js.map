{"version":3,"file":"useFittingItems.js","names":["React","useComponentSize","getTabsWidth","useFittingItems","tabsDimensions","containerRef","moreItemsRef","containerWidth","width","moreItemsWidth","fittingItemsCount","useMemo","getFittingItemsCount","totalWidth","isItemHidden","useCallback","idx","length","entries","tabDimensions","isLastItem","previousTabsDimensions","slice","size","gap"],"sources":["../../../../../../src/components/TabsDeprecated/FitModeDropdownWrapper/useFittingItems.ts"],"sourcesContent":["import React from 'react';\n\nimport { useComponentSize } from '../../../hooks/useComponentSize/useComponentSize';\nimport { getTabsWidth, TabDimensions } from '../helpers';\n\nexport const useFittingItems = ({\n  tabsDimensions,\n  containerRef,\n  moreItemsRef,\n}: {\n  tabsDimensions: TabDimensions[];\n  containerRef: React.RefObject<HTMLElement>;\n  moreItemsRef: React.RefObject<HTMLElement>;\n}): {\n  fittingItemsCount: number;\n  isItemHidden: (idx: number) => boolean;\n} => {\n  const { width: containerWidth } = useComponentSize(containerRef);\n  const { width: moreItemsWidth } = useComponentSize(moreItemsRef);\n\n  const fittingItemsCount = React.useMemo(\n    () =>\n      getFittingItemsCount({\n        tabsDimensions,\n        totalWidth: containerWidth,\n        moreItemsWidth,\n      }),\n    [tabsDimensions, containerWidth, moreItemsWidth],\n  );\n\n  return {\n    fittingItemsCount,\n    isItemHidden: React.useCallback(\n      (idx) => idx >= fittingItemsCount,\n      [fittingItemsCount],\n    ),\n  };\n};\n\nexport const getFittingItemsCount = ({\n  tabsDimensions,\n  totalWidth,\n  moreItemsWidth,\n}: {\n  tabsDimensions: TabDimensions[];\n  totalWidth: number;\n  moreItemsWidth: number;\n}): number => {\n  if (!totalWidth) {\n    return tabsDimensions.length;\n  }\n\n  for (const [idx, tabDimensions] of tabsDimensions.entries()) {\n    const isLastItem = idx === tabsDimensions.length - 1;\n    const previousTabsDimensions = tabsDimensions.slice(0, idx);\n    const width =\n      tabDimensions.size +\n      getTabsWidth(previousTabsDimensions) +\n      (isLastItem ? 0 : tabDimensions.gap + moreItemsWidth);\n    if (width > totalWidth) {\n      return idx;\n    }\n  }\n\n  return tabsDimensions.length;\n};\n"],"mappings":"stCAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,gBAAT,wDACA,OAASC,YAAT,kBAEA,MAAO,IAAMC,gBAAe,CAAG,WAW1B,IAVHC,EAUG,GAVHA,cAUG,CATHC,CASG,GATHA,YASG,CARHC,CAQG,GARHA,YAQG,GAC+BL,gBAAgB,CAACI,CAAD,CAD/C,CACYE,CADZ,GACKC,KADL,GAE+BP,gBAAgB,CAACK,CAAD,CAF/C,CAEYG,CAFZ,GAEKD,KAFL,CAIGE,CAAiB,CAAGV,KAAK,CAACW,OAAN,CACxB,iBACEC,qBAAoB,CAAC,CACnBR,cAAc,CAAdA,CADmB,CAEnBS,UAAU,CAAEN,CAFO,CAGnBE,cAAc,CAAdA,CAHmB,CAAD,CADtB,CADwB,CAOxB,CAACL,CAAD,CAAiBG,CAAjB,CAAiCE,CAAjC,CAPwB,CAJvB,CAcH,MAAO,CACLC,iBAAiB,CAAjBA,CADK,CAELI,YAAY,CAAEd,KAAK,CAACe,WAAN,CACZ,SAACC,CAAD,QAASA,EAAG,EAAIN,CAAhB,CADY,CAEZ,CAACA,CAAD,CAFY,CAFT,CAOR,CAhCM,CAkCP,MAAO,IAAME,qBAAoB,CAAG,WAQtB,IAPZR,EAOY,GAPZA,cAOY,CANZS,CAMY,GANZA,UAMY,CALZJ,CAKY,GALZA,cAKY,CACZ,GAAI,CAACI,CAAL,CACE,MAAOT,EAAc,CAACa,MAAtB,CAFU,mCAKuBb,CAAc,CAACc,OAAf,EALvB,MAKZ,2BAA6D,iCAAjDF,CAAiD,MAA5CG,CAA4C,MACrDC,CAAU,CAAGJ,CAAG,GAAKZ,CAAc,CAACa,MAAf,CAAwB,CADQ,CAErDI,CAAsB,CAAGjB,CAAc,CAACkB,KAAf,CAAqB,CAArB,CAAwBN,CAAxB,CAF4B,CAGrDR,CAAK,CACTW,CAAa,CAACI,IAAd,CACArB,YAAY,CAACmB,CAAD,CADZ,EAECD,CAAU,CAAG,CAAH,CAAOD,CAAa,CAACK,GAAd,CAAoBf,CAFtC,CAJyD,CAO3D,GAAID,CAAK,CAAGK,CAAZ,CACE,MAAOG,EAEV,CAfW,+BAiBZ,MAAOZ,EAAc,CAACa,MACvB,CA1BM"}