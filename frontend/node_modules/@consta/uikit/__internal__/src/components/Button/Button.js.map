{"version":3,"file":"Button.js","names":["React","useRef","useForkRef","cnMixFocus","cn","getByMap","forwardRefWithAs","usePropsHandler","Loader","buttonPropSize","buttonPropSizeDefault","buttonPropView","buttonPropViewDefault","buttonPropWidth","buttonPropWidthDefault","buttonPropForm","mapStableForm","defaultClear","defaultBrick","brick","brickDefault","brickClear","brickRound","round","roundClear","roundBrick","clearRound","clearDefault","clearBrick","clearClear","buttonPropFormDefault","COMPONENT_NAME","cnButton","sizeMap","xs","s","m","l","sizeMapOnlyIcon","Button","props","ref","buttonRef","size","view","width","form","iconLeft","iconRight","label","className","onClick","disabled","loading","tabIndex","as","onlyIcon","iconSizeProp","iconSize","otherProps","Tag","IconOnly","IconLeft","IconRight","title","handleClick","e","withIcon","position"],"sources":["../../../../../src/components/Button/Button.tsx"],"sourcesContent":["import './Button.css';\n\nimport { IconComponent, IconPropSize } from '@consta/icons/Icon';\nimport React, { useRef } from 'react';\n\nimport { useForkRef } from '../../hooks/useForkRef/useForkRef';\nimport { cnMixFocus } from '../../mixs/MixFocus/MixFocus';\nimport { cn } from '../../utils/bem';\nimport { getByMap } from '../../utils/getByMap';\nimport { forwardRefWithAs } from '../../utils/types/PropsWithAsAttributes';\nimport { usePropsHandler } from '../EventInterceptor/usePropsHandler';\nimport { Loader } from '../Loader/Loader';\n\nexport const buttonPropSize = ['m', 'xs', 's', 'l'] as const;\nexport type ButtonPropSize = typeof buttonPropSize[number];\nexport const buttonPropSizeDefault: ButtonPropSize = buttonPropSize[0];\n\nexport const buttonPropView = [\n  'primary',\n  'clear',\n  'ghost',\n  'secondary',\n] as const;\nexport type ButtonPropView = typeof buttonPropView[number];\nexport const buttonPropViewDefault: ButtonPropView = buttonPropView[0];\n\nexport const buttonPropWidth = ['default', 'full'] as const;\nexport type ButtonPropWidth = typeof buttonPropWidth[number];\nexport const buttonPropWidthDefault: ButtonPropWidth = buttonPropWidth[0];\n\nexport const buttonPropForm = [\n  'default',\n  'brick',\n  'round',\n  'brickRound',\n  'roundBrick',\n  'brickDefault',\n  'defaultBrick',\n] as const;\n\nexport type ButtonPropForm = typeof buttonPropForm[number];\n\ntype GlobalForm =\n  | 'default'\n  | 'brick'\n  | 'round'\n  | 'brickRound'\n  | 'roundBrick'\n  | 'brickDefault'\n  | 'defaultBrick'\n  | 'defaultClear'\n  | 'brickClear'\n  | 'roundClear'\n  | 'clearRound'\n  | 'clearDefault'\n  | 'clearBrick'\n  | 'clearClear';\n\nconst mapStableForm: Record<GlobalForm, ButtonPropForm> = {\n  default: 'default',\n  defaultClear: 'defaultBrick',\n  defaultBrick: 'defaultBrick',\n  brick: 'brick',\n  brickDefault: 'brickDefault',\n  brickClear: 'brick',\n  brickRound: 'brickRound',\n  round: 'round',\n  roundClear: 'roundBrick',\n  roundBrick: 'roundBrick',\n  clearRound: 'brickRound',\n  clearDefault: 'brickDefault',\n  clearBrick: 'brick',\n  clearClear: 'brick',\n};\n\nexport const buttonPropFormDefault = buttonPropForm[0];\n\nexport type Props = {\n  size?: ButtonPropSize;\n  view?: ButtonPropView;\n  width?: ButtonPropWidth;\n  form?: ButtonPropForm;\n  tabIndex?: number;\n  disabled?: boolean;\n  loading?: boolean;\n  label?: string | number;\n  onClick?: React.EventHandler<React.MouseEvent>;\n  iconLeft?: IconComponent;\n  iconRight?: IconComponent;\n  onlyIcon?: boolean;\n  iconSize?: IconPropSize;\n  title?: string;\n  children?: never;\n};\n\nexport const COMPONENT_NAME = 'Button' as const;\nexport const cnButton = cn(COMPONENT_NAME);\n\nconst sizeMap: Record<ButtonPropSize, IconPropSize> = {\n  xs: 'xs',\n  s: 'xs',\n  m: 's',\n  l: 'm',\n};\n\nconst sizeMapOnlyIcon: Record<ButtonPropSize, IconPropSize> = {\n  xs: 'xs',\n  s: 's',\n  m: 'm',\n  l: 'm',\n};\n\nexport const Button = forwardRefWithAs<Props, 'button'>((props, ref) => {\n  const buttonRef = useRef<HTMLButtonElement | null>(null);\n\n  const {\n    size = buttonPropSizeDefault,\n    view = buttonPropViewDefault,\n    width = buttonPropWidthDefault,\n    form = buttonPropFormDefault,\n    iconLeft,\n    iconRight,\n    label,\n    className,\n    onClick,\n    disabled,\n    loading,\n    tabIndex,\n    as = 'button',\n    onlyIcon,\n    iconSize: iconSizeProp,\n    ...otherProps\n  } = usePropsHandler(COMPONENT_NAME, props, buttonRef);\n\n  const Tag = as as string;\n  const IconOnly = (!label || onlyIcon) && (iconLeft || iconRight);\n  const IconLeft = iconLeft;\n  const IconRight = iconRight;\n  const withIcon = !!iconLeft || !!iconRight;\n  const title = props.title || (!!IconOnly && label) || undefined;\n  const iconSize = IconOnly\n    ? getByMap(sizeMapOnlyIcon, size, iconSizeProp)\n    : getByMap(sizeMap, size, iconSizeProp);\n\n  const handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    if (!disabled && !loading && onClick) {\n      onClick(e);\n    }\n  };\n\n  return (\n    <Tag\n      {...otherProps}\n      onClick={onClick ? handleClick : undefined}\n      className={cnButton(\n        {\n          size,\n          view,\n          width,\n          form: mapStableForm[form],\n          disabled,\n          loading,\n          withIcon,\n          onlyIcon: !!IconOnly,\n        },\n        [cnMixFocus(), className],\n      )}\n      tabIndex={tabIndex}\n      title={title}\n      ref={useForkRef([ref, buttonRef])}\n      {...(Tag === 'button' ? { disabled: disabled || loading } : {})}\n    >\n      {IconOnly && <IconOnly className={cnButton('Icon')} size={iconSize} />}\n      {!IconOnly &&\n        ((IconLeft || IconRight) && label ? (\n          <>\n            {IconLeft && (\n              <IconLeft\n                className={cnButton('Icon', { position: 'left' })}\n                size={iconSize}\n              />\n            )}\n            <span className={cnButton('Label')}>{label}</span>\n            {IconRight && (\n              <IconRight\n                className={cnButton('Icon', { position: 'right' })}\n                size={iconSize}\n              />\n            )}\n          </>\n        ) : (\n          label\n        ))}\n      {loading && <Loader className={cnButton('Loader')} size=\"s\" />}\n    </Tag>\n  );\n});\n"],"mappings":"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"}