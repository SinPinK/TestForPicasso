{"version":3,"file":"Tooltip.js","names":["React","useMemo","useState","cnMixPopoverArrow","cn","Popover","Text","generateDeps","generateThemeClassNames","ThemeContext","useTheme","ARROW_SIZE","ARROW_OFFSET","cnTooltip","tooltipPropSizes","tooltipPropSizesDefault","tooltipPropStatus","renderChildren","children","Tooltip","forwardRef","props","ref","size","className","status","onSetDirectionProp","onSetDirection","style","rest","theme","direction","setDirection","value","tooltipTheme","color","primary","accent","invert","themeClassNames"],"sources":["../../../../../src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import './Tooltip.css';\n\nimport React, { useMemo, useState } from 'react';\n\nimport { ClickOutsideHandler } from '../../hooks/useClickOutside/useClickOutside';\nimport { cnMixPopoverArrow } from '../../mixs/MixPopoverArrow/MixPopoverArrow';\nimport { cn } from '../../utils/bem';\nimport { PropsWithJsxAttributes } from '../../utils/types/PropsWithJsxAttributes';\nimport { Direction, Popover, PositioningProps } from '../Popover/Popover';\nimport { Text } from '../Text/Text';\nimport {\n  generateDeps,\n  generateThemeClassNames,\n  ThemeContext,\n  useTheme,\n} from '../Theme/Theme';\n\nconst ARROW_SIZE = 6;\nconst ARROW_OFFSET = 8;\n\nconst cnTooltip = cn('Tooltip');\n\nexport const tooltipPropSizes = ['m', 's', 'l'] as const;\nexport const tooltipPropSizesDefault = tooltipPropSizes[0];\nexport type TooltipPropSize = typeof tooltipPropSizes[number];\n\nexport const tooltipPropStatus = [\n  'normal',\n  'alert',\n  'success',\n  'warning',\n] as const;\nexport type TooltipPropStatus = typeof tooltipPropStatus[number];\n\nexport type TooltipProps = PropsWithJsxAttributes<\n  {\n    size?: TooltipPropSize;\n    status?: TooltipPropStatus;\n    direction?: Direction;\n    spareDirection?: Direction;\n    possibleDirections?: readonly Direction[];\n    isInteractive?: boolean;\n    children: React.ReactNode;\n    onClickOutside?: ClickOutsideHandler;\n    className?: string;\n    onSetDirection?: (direction: Direction) => void;\n  } & PositioningProps\n>;\n\nfunction renderChildren(children: React.ReactNode): React.ReactNode {\n  return typeof children === 'string' || typeof children === 'number' ? (\n    <Text size=\"xs\">{children}</Text>\n  ) : (\n    children\n  );\n}\n\nexport const Tooltip = React.forwardRef<HTMLDivElement, TooltipProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = tooltipPropSizesDefault,\n      className,\n      status,\n      onSetDirection: onSetDirectionProp,\n      style,\n      ...rest\n    } = props;\n    const { theme } = useTheme();\n    const [direction, setDirection] = useState<Direction | undefined>();\n\n    const onSetDirection = (direction: Direction) => {\n      onSetDirectionProp && onSetDirectionProp(direction);\n      setDirection(direction);\n    };\n\n    const value = useMemo(() => {\n      const tooltipTheme = status\n        ? {\n            ...theme,\n            color: {\n              primary: theme.color.accent,\n              accent: theme.color.accent,\n              invert: theme.color.primary,\n            },\n          }\n        : {\n            ...theme,\n            color: {\n              primary: theme.color.invert,\n              accent: theme.color.accent,\n              invert: theme.color.primary,\n            },\n          };\n\n      return {\n        theme: tooltipTheme,\n        themeClassNames: generateThemeClassNames(tooltipTheme),\n      };\n    }, [generateDeps(theme), status]);\n\n    return (\n      <ThemeContext.Provider value={value}>\n        <Popover\n          {...rest}\n          arrowOffset={ARROW_OFFSET + ARROW_SIZE}\n          offset={ARROW_SIZE + 4}\n          onSetDirection={onSetDirection}\n          ref={ref}\n          className={cnTooltip({ status }, [className])}\n          style={{\n            ['--popover-arrow-size' as string]: `${ARROW_SIZE}px`,\n            ['--popover-arrow-offset' as string]: `${ARROW_OFFSET}px`,\n            ...style,\n          }}\n        >\n          <div className={cnTooltip('Background')} />\n          <div\n            className={cnTooltip('Arrow', [cnMixPopoverArrow({ direction })])}\n          />\n          <div className={cnTooltip('Content', { size })}>\n            {renderChildren(children)}\n          </div>\n        </Popover>\n      </ThemeContext.Provider>\n    );\n  },\n);\n"],"mappings":"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"}