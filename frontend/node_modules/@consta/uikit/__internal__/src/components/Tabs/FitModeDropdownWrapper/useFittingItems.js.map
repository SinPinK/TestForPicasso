{"version":3,"file":"useFittingItems.js","names":["React","useComponentSize","getTabsWidth","useFittingItems","tabsDimensions","containerRef","moreItemsRef","containerWidth","width","moreItemsWidth","fittingItemsCount","useMemo","getFittingItemsCount","isItemHidden","useCallback","idx","totalWidth","length","entries","tabDimensions","isLastItem","previousTabsDimensions","slice","size","gap"],"sources":["../../../../../../src/components/Tabs/FitModeDropdownWrapper/useFittingItems.ts"],"sourcesContent":["import React from 'react';\n\nimport { useComponentSize } from '../../../hooks/useComponentSize/useComponentSize';\nimport { getTabsWidth } from '../helpers';\nimport { TabDimensions } from '../types';\n\nexport const useFittingItems = ({\n  tabsDimensions,\n  containerRef,\n  moreItemsRef,\n}: {\n  tabsDimensions: TabDimensions[];\n  containerRef: React.RefObject<HTMLElement>;\n  moreItemsRef: React.RefObject<HTMLElement>;\n}): {\n  fittingItemsCount: number;\n  isItemHidden: (idx: number) => boolean;\n} => {\n  const { width: containerWidth } = useComponentSize(containerRef);\n  const { width: moreItemsWidth } = useComponentSize(moreItemsRef);\n\n  const fittingItemsCount = React.useMemo(\n    () => getFittingItemsCount(tabsDimensions, containerWidth, moreItemsWidth),\n    [tabsDimensions, containerWidth, moreItemsWidth],\n  );\n\n  return {\n    fittingItemsCount,\n    isItemHidden: React.useCallback(\n      (idx) => idx >= fittingItemsCount,\n      [fittingItemsCount],\n    ),\n  };\n};\n\nexport const getFittingItemsCount = (\n  tabsDimensions: TabDimensions[],\n  totalWidth: number,\n  moreItemsWidth: number,\n): number => {\n  if (!totalWidth) {\n    return tabsDimensions.length;\n  }\n\n  for (const [idx, tabDimensions] of tabsDimensions.entries()) {\n    const isLastItem = idx === tabsDimensions.length - 1;\n    const previousTabsDimensions = tabsDimensions.slice(0, idx);\n    const width =\n      tabDimensions.size +\n      getTabsWidth(previousTabsDimensions) +\n      (isLastItem ? 0 : tabDimensions.gap + moreItemsWidth);\n    if (width > totalWidth) {\n      return idx;\n    }\n  }\n\n  return tabsDimensions.length;\n};\n"],"mappings":"stCAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,gBAAT,wDACA,OAASC,YAAT,kBAGA,MAAO,IAAMC,gBAAe,CAAG,WAW1B,IAVHC,EAUG,GAVHA,cAUG,CATHC,CASG,GATHA,YASG,CARHC,CAQG,GARHA,YAQG,GAC+BL,gBAAgB,CAACI,CAAD,CAD/C,CACYE,CADZ,GACKC,KADL,GAE+BP,gBAAgB,CAACK,CAAD,CAF/C,CAEYG,CAFZ,GAEKD,KAFL,CAIGE,CAAiB,CAAGV,KAAK,CAACW,OAAN,CACxB,iBAAMC,qBAAoB,CAACR,CAAD,CAAiBG,CAAjB,CAAiCE,CAAjC,CAA1B,CADwB,CAExB,CAACL,CAAD,CAAiBG,CAAjB,CAAiCE,CAAjC,CAFwB,CAJvB,CASH,MAAO,CACLC,iBAAiB,CAAjBA,CADK,CAELG,YAAY,CAAEb,KAAK,CAACc,WAAN,CACZ,SAACC,CAAD,QAASA,EAAG,EAAIL,CAAhB,CADY,CAEZ,CAACA,CAAD,CAFY,CAFT,CAOR,CA3BM,CA6BP,MAAO,IAAME,qBAAoB,CAAG,SAClCR,CADkC,CAElCY,CAFkC,CAGlCP,CAHkC,CAIvB,CACX,GAAI,CAACO,CAAL,CACE,MAAOZ,EAAc,CAACa,MAAtB,CAFS,mCAKwBb,CAAc,CAACc,OAAf,EALxB,MAKX,2BAA6D,iCAAjDH,CAAiD,MAA5CI,CAA4C,MACrDC,CAAU,CAAGL,CAAG,GAAKX,CAAc,CAACa,MAAf,CAAwB,CADQ,CAErDI,CAAsB,CAAGjB,CAAc,CAACkB,KAAf,CAAqB,CAArB,CAAwBP,CAAxB,CAF4B,CAGrDP,CAAK,CACTW,CAAa,CAACI,IAAd,CACArB,YAAY,CAACmB,CAAD,CADZ,EAECD,CAAU,CAAG,CAAH,CAAOD,CAAa,CAACK,GAAd,CAAoBf,CAFtC,CAJyD,CAO3D,GAAID,CAAK,CAAGQ,CAAZ,CACE,MAAOD,EAEV,CAfU,+BAiBX,MAAOX,EAAc,CAACa,MACvB,CAtBM"}