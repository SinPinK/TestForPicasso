{"version":3,"file":"TabsFitModeDropdownWrapper.js","names":["React","cn","getTabsWidth","TabsMoreItems","useFittingItems","cnTabsFitModeDropdownWrapper","TabsFitModeDropdownWrapper","items","tabsDimensions","tabRefs","getItemLabel","getItemChecked","renderItem","renderItemsList","size","ref","useRef","moreItemsRef","containerRef","isItemHidden","hiddenItems","filter","_item","idx","maxTabHeight","useMemo","Math","max","map","tabRef","current","offsetHeight","checkedItemIsHidden","some","visibleTabsWidth","_td","height","withRunningLine","getTabClassName","hidden","length","left"],"sources":["../../../../../../src/components/Tabs/FitModeDropdownWrapper/TabsFitModeDropdownWrapper.tsx"],"sourcesContent":["import './TabsFitModeDropdownWrapper.css';\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/bem';\nimport { getTabsWidth } from '../helpers';\nimport { TabsMoreItems } from '../MoreItems/TabsMoreItems';\nimport { TabsFitModeWrapperProps } from '../types';\nimport { useFittingItems } from './useFittingItems';\n\nconst cnTabsFitModeDropdownWrapper = cn('TabsFitModeDropdownWrapper');\n\nexport const TabsFitModeDropdownWrapper = <ITEM,>({\n  items,\n  tabsDimensions,\n  tabRefs,\n  getItemLabel,\n  getItemChecked,\n  renderItem,\n  renderItemsList,\n  size,\n}: TabsFitModeWrapperProps<ITEM>): React.ReactElement | null => {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const moreItemsRef = React.useRef<HTMLDivElement>(null);\n  const { isItemHidden } = useFittingItems({\n    tabsDimensions,\n    containerRef: ref,\n    moreItemsRef,\n  });\n  const hiddenItems = items.filter((_item, idx) => isItemHidden(idx));\n  const maxTabHeight: number = React.useMemo(() => {\n    return Math.max(\n      ...tabRefs.map((tabRef) => tabRef.current?.offsetHeight ?? 0),\n    );\n  }, [tabsDimensions]);\n  const checkedItemIsHidden = hiddenItems.some(getItemChecked);\n  const visibleTabsWidth = getTabsWidth(\n    tabsDimensions.filter((_td, idx) => !isItemHidden(idx)),\n  );\n\n  return (\n    <div\n      ref={ref}\n      className={cnTabsFitModeDropdownWrapper()}\n      style={{ height: maxTabHeight }}\n    >\n      <div className={cnTabsFitModeDropdownWrapper('Tabs')}>\n        {renderItemsList({\n          withRunningLine: !checkedItemIsHidden,\n          getTabClassName: (idx) =>\n            cnTabsFitModeDropdownWrapper('Tab', { hidden: isItemHidden(idx) }),\n        })}\n      </div>\n      <div\n        ref={moreItemsRef}\n        className={cnTabsFitModeDropdownWrapper('MoreItems', {\n          hidden: !hiddenItems.length,\n        })}\n        style={{\n          /* В Safari скрытые табы с абсолютом продолжают растягивать контейнер,\n            поэтому приходится позиционировать кнопку абсолютом */\n          left: hiddenItems.length ? visibleTabsWidth : undefined,\n        }}\n      >\n        <TabsMoreItems\n          items={hiddenItems}\n          renderItem={renderItem}\n          getItemLabel={getItemLabel}\n          getItemChecked={getItemChecked}\n          height={maxTabHeight}\n          size={size}\n        />\n      </div>\n    </div>\n  );\n};\n"],"mappings":"yEAAA,yCAEA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,EAAT,0BACA,OAASC,YAAT,kBACA,OAASC,aAAT,kCAEA,OAASC,eAAT,yBAEA,GAAMC,6BAA4B,CAAGJ,EAAE,CAAC,4BAAD,CAAvC,CAEA,MAAO,IAAMK,2BAA0B,CAAG,WASsB,IAR9DC,EAQ8D,GAR9DA,KAQ8D,CAP9DC,CAO8D,GAP9DA,cAO8D,CAN9DC,CAM8D,GAN9DA,OAM8D,CAL9DC,CAK8D,GAL9DA,YAK8D,CAJ9DC,CAI8D,GAJ9DA,cAI8D,CAH9DC,CAG8D,GAH9DA,UAG8D,CAF9DC,CAE8D,GAF9DA,eAE8D,CAD9DC,CAC8D,GAD9DA,IAC8D,CACxDC,CAAG,CAAGf,KAAK,CAACgB,MAAN,CAA6B,IAA7B,CADkD,CAExDC,CAAY,CAAGjB,KAAK,CAACgB,MAAN,CAA6B,IAA7B,CAFyC,GAGrCZ,eAAe,CAAC,CACvCI,cAAc,CAAdA,CADuC,CAEvCU,YAAY,CAAEH,CAFyB,CAGvCE,YAAY,CAAZA,CAHuC,CAAD,CAHsB,CAGtDE,CAHsD,GAGtDA,YAHsD,CAQxDC,CAAW,CAAGb,CAAK,CAACc,MAAN,CAAa,SAACC,CAAD,CAAQC,CAAR,QAAgBJ,EAAY,CAACI,CAAD,CAA5B,CAAb,CAR0C,CASxDC,CAAoB,CAAGxB,KAAK,CAACyB,OAAN,CAAc,UAAM,CAC/C,MAAOC,KAAI,CAACC,GAAL,OAAAD,IAAI,oBACNjB,CAAO,CAACmB,GAAR,CAAY,SAACC,CAAD,qCAAYA,CAAM,CAACC,OAAnB,qBAAY,EAAgBC,YAA5B,gBAA4C,CAA5C,CAAZ,CADM,EAGZ,CAJ4B,CAI1B,CAACvB,CAAD,CAJ0B,CATiC,CAcxDwB,CAAmB,CAAGZ,CAAW,CAACa,IAAZ,CAAiBtB,CAAjB,CAdkC,CAexDuB,CAAgB,CAAGhC,YAAY,CACnCM,CAAc,CAACa,MAAf,CAAsB,SAACc,CAAD,CAAMZ,CAAN,QAAc,CAACJ,CAAY,CAACI,CAAD,CAA3B,CAAtB,CADmC,CAfyB,CAmB9D,MACE,4BACE,GAAG,CAAER,CADP,CAEE,SAAS,CAAEV,4BAA4B,EAFzC,CAGE,KAAK,CAAE,CAAE+B,MAAM,CAAEZ,CAAV,CAHT,EAKE,2BAAK,SAAS,CAAEnB,4BAA4B,CAAC,MAAD,CAA5C,EACGQ,CAAe,CAAC,CACfwB,eAAe,CAAE,CAACL,CADH,CAEfM,eAAe,CAAE,yBAACf,CAAD,QACflB,6BAA4B,CAAC,KAAD,CAAQ,CAAEkC,MAAM,CAAEpB,CAAY,CAACI,CAAD,CAAtB,CAAR,CADb,CAFF,CAAD,CADlB,CALF,CAYE,2BACE,GAAG,CAAEN,CADP,CAEE,SAAS,CAAEZ,4BAA4B,CAAC,WAAD,CAAc,CACnDkC,MAAM,CAAE,CAACnB,CAAW,CAACoB,MAD8B,CAAd,CAFzC,CAKE,KAAK,CAAE,CAGLC,IAAI,CAAErB,CAAW,CAACoB,MAAZ,CAAqBN,CAArB,OAHD,CALT,EAWE,oBAAC,aAAD,EACE,KAAK,CAAEd,CADT,CAEE,UAAU,CAAER,CAFd,CAGE,YAAY,CAAEF,CAHhB,CAIE,cAAc,CAAEC,CAJlB,CAKE,MAAM,CAAEa,CALV,CAME,IAAI,CAAEV,CANR,EAXF,CAZF,CAkCH,CA/DM"}