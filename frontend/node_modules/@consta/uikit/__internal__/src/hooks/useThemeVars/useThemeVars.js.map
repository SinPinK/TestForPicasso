{"version":3,"file":"useThemeVars.js","names":["useMemo","cnTheme","useTheme","defaultVars","getVars","cssVars","element","vars","style","getComputedStyle","i","length","getPropertyValue","trim","addElement","mods","document","createElement","setAttribute","body","append","useThemeVars","options","variables","theme","elementPrimary","color","primary","elementAccent","accent","elementInvert","invert","themeVars","control","font","size","space","shadow","removeChild","deps"],"sources":["../../../../../src/hooks/useThemeVars/useThemeVars.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport { useMemo } from 'react';\n\nimport { cnTheme, useTheme } from '../../components/Theme/Theme';\nimport { defaultVars } from './helpers';\n\nexport { defaultVars } from './helpers';\n\nexport type Vars = {\n  readonly color: {\n    readonly primary: readonly string[];\n    readonly accent: readonly string[];\n    readonly invert: readonly string[];\n  };\n  readonly control: readonly string[];\n  readonly font: readonly string[];\n  readonly size: readonly string[];\n  readonly space: readonly string[];\n  readonly shadow: readonly string[];\n};\n\nexport type ThemeVars<T extends Vars = typeof defaultVars> = {\n  color: {\n    primary: { [key in T['color']['primary'][number]]: string };\n    accent: { [key in T['color']['accent'][number]]: string };\n    invert: { [key in T['color']['invert'][number]]: string };\n  };\n  control: { [key in T['control'][number]]: string };\n  font: { [key in T['font'][number]]: string };\n  size: { [key in T['size'][number]]: string };\n  space: { [key in T['space'][number]]: string };\n  shadow: { [key in T['shadow'][number]]: string };\n};\n\ntype UseThemeVarsOptions<T> = {\n  vars?: T;\n  deps?: [];\n};\n\nconst getVars = <T extends string>(\n  cssVars: readonly T[],\n  element: HTMLDivElement,\n): { [key in T]: string } => {\n  const vars: { [key in T]: string } = {} as { [key in T]: string };\n\n  const style = getComputedStyle(element);\n\n  for (let i = 0; i < cssVars.length; i++) {\n    vars[cssVars[i]] = style.getPropertyValue(cssVars[i]).trim();\n  }\n\n  return vars;\n};\n\nconst addElement = (mods: {}): HTMLDivElement => {\n  const element = document.createElement('div');\n  element.setAttribute('class', cnTheme(mods));\n  document.body.append(element);\n  return element;\n};\n\nexport const useThemeVars = <T extends Vars = typeof defaultVars>(\n  options?: UseThemeVarsOptions<T>,\n) => {\n  const variables = options?.vars || defaultVars;\n\n  const { theme } = useTheme();\n\n  return useMemo(() => {\n    const elementPrimary = addElement({\n      ...theme,\n      color: theme.color.primary,\n    });\n    const elementAccent = addElement({ color: theme.color.accent });\n    const elementInvert = addElement({ color: theme.color.invert });\n\n    const themeVars: ThemeVars<T> = {\n      color: {\n        primary: getVars<T['color']['primary'][number]>(\n          variables.color.primary,\n          elementPrimary,\n        ),\n        accent: getVars<T['color']['accent'][number]>(\n          variables.color.accent,\n          elementAccent,\n        ),\n        invert: getVars<T['color']['invert'][number]>(\n          variables.color.invert,\n          elementInvert,\n        ),\n      },\n      control: getVars<T['control'][number]>(variables.control, elementPrimary),\n      font: getVars<T['font'][number]>(variables.font, elementPrimary),\n      size: getVars<T['size'][number]>(variables.size, elementPrimary),\n      space: getVars<T['space'][number]>(variables.space, elementPrimary),\n      shadow: getVars<T['shadow'][number]>(variables.shadow, elementPrimary),\n    };\n\n    document.body.removeChild(elementPrimary);\n    document.body.removeChild(elementAccent);\n    document.body.removeChild(elementInvert);\n\n    return themeVars;\n  }, [\n    theme.color.primary,\n    theme.color.accent,\n    theme.color.invert,\n    theme.control,\n    theme.font,\n    theme.size,\n    theme.space,\n    theme.shadow,\n    ...(options?.deps ? options.deps : []),\n  ]);\n};\n"],"mappings":"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"}