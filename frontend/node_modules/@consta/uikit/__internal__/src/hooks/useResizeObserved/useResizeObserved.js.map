{"version":3,"file":"useResizeObserved.js","names":["React","useResizeObserved","refs","mapper","useState","map","ref","current","dimensions","setDimensions","mapperRef","useRef","useLayoutEffect","resizeObserver","ResizeObserver","observe","disconnect"],"sources":["../../../../../src/hooks/useResizeObserved/useResizeObserved.ts"],"sourcesContent":["import React, { RefObject } from 'react';\n\nexport const useResizeObserved = <\n  ELEMENT extends HTMLElement | SVGGraphicsElement,\n  RETURN_TYPE,\n>(\n  refs: Array<RefObject<ELEMENT>>,\n  mapper: (el: ELEMENT | null) => RETURN_TYPE,\n): RETURN_TYPE[] => {\n  const [dimensions, setDimensions] = React.useState<RETURN_TYPE[]>(() =>\n    refs.map((ref) => mapper(ref.current)),\n  );\n\n  // Храним маппер в рефке, чтобы если его передадут инлайн-функцией, это не вызвало бесконечные перерендеры\n  const mapperRef = React.useRef(mapper);\n  React.useLayoutEffect(() => {\n    mapperRef.current = mapper;\n  }, [mapper]);\n\n  React.useLayoutEffect(() => {\n    const resizeObserver = new ResizeObserver(() => {\n      setDimensions(refs.map((ref) => mapperRef.current(ref.current)));\n    });\n\n    for (const ref of refs) {\n      ref.current && resizeObserver.observe(ref.current);\n    }\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [refs]);\n\n  return dimensions;\n};\n"],"mappings":"stCAAA,MAAOA,MAAP,KAAiC,OAAjC,CAEA,MAAO,IAAMC,kBAAiB,CAAG,SAI/BC,CAJ+B,CAK/BC,CAL+B,CAMb,OACkBH,KAAK,CAACI,QAAN,CAA8B,iBAChEF,EAAI,CAACG,GAAL,CAAS,SAACC,CAAD,QAASH,EAAM,CAACG,CAAG,CAACC,OAAL,CAAf,CAAT,CADgE,CAA9B,CADlB,uBACXC,CADW,MACCC,CADD,MAMZC,CAAS,CAAGV,KAAK,CAACW,MAAN,CAAaR,CAAb,CANA,CAyBlB,MAlBAH,MAAK,CAACY,eAAN,CAAsB,UAAM,CAC1BF,CAAS,CAACH,OAAV,CAAoBJ,CACrB,CAFD,CAEG,CAACA,CAAD,CAFH,CAkBA,CAdAH,KAAK,CAACY,eAAN,CAAsB,UAAM,OACpBC,CAAc,CAAG,GAAIC,eAAJ,CAAmB,UAAM,CAC9CL,CAAa,CAACP,CAAI,CAACG,GAAL,CAAS,SAACC,CAAD,QAASI,EAAS,CAACH,OAAV,CAAkBD,CAAG,CAACC,OAAtB,CAAT,CAAT,CAAD,CACd,CAFsB,CADG,8BAKRL,CALQ,MAK1B,2BAAwB,IAAbI,EAAa,SACtBA,CAAG,CAACC,OAAJ,EAAeM,CAAc,CAACE,OAAf,CAAuBT,CAAG,CAACC,OAA3B,CAChB,CAPyB,+BAS1B,MAAO,WAAM,CACXM,CAAc,CAACG,UAAf,EACD,CACF,CAZD,CAYG,CAACd,CAAD,CAZH,CAcA,CAAOM,CACR,CAhCM"}