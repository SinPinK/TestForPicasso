{"version":3,"file":"Icon.js","names":["React","forwardRef","useContext","useEffect","useMemo","cnIcons","IconsContext","cn","iconPropSize","iconPropSizeDefault","iconPropView","iconPropViewDefault","cnIcon","renderTypeDefault","l","m","s","xs","createIcon","createProps","name","renderType","color","IconComponent","props","ref","size","className","view","Svg","addIcon","removeIcon","SvgElement","children","otherProps"],"sources":["../../../../../src/icons/Icon/Icon.tsx"],"sourcesContent":["import './Icon.css';\n\nimport React, { forwardRef, useContext, useEffect, useMemo } from 'react';\n\nimport { cnIcons, IconsContext } from '##/components/IconsProvider';\n\nimport { cn } from '../../utils/bem';\nimport { PropsWithHTMLAttributesAndRef } from '../../utils/types/PropsWithHTMLAttributes';\n\nexport const iconPropSize = ['m', 's', 'xs', 'l'] as const;\nexport type IconPropSize = typeof iconPropSize[number];\nexport const iconPropSizeDefault = iconPropSize[0];\n\nexport const iconPropView = [\n  'primary',\n  'alert',\n  'brand',\n  'ghost',\n  'link',\n  'secondary',\n  'success',\n  'warning',\n  'disabled',\n] as const;\nexport type IconPropView = typeof iconPropView[number];\nexport const iconPropViewDefault = iconPropView[0];\n\nexport type IconProps = PropsWithHTMLAttributesAndRef<\n  {\n    view?: IconPropView;\n    size?: IconPropSize;\n  },\n  HTMLSpanElement\n>;\n\nexport type IconComponent = React.FC<IconProps>;\n\nexport const cnIcon = cn('Icon');\n\nconst renderTypeDefault = {\n  l: 'default',\n  m: 'default',\n  s: 'default',\n  xs: 'default',\n};\n\nexport type CreateIconRenderType = {\n  l?: 'use' | 'default';\n  m?: 'use' | 'default';\n  s?: 'use' | 'default';\n  xs?: 'use' | 'default';\n};\n\nexport type CreateIconArguments = {\n  l: React.FC<React.SVGProps<SVGSVGElement>>;\n  m: React.FC<React.SVGProps<SVGSVGElement>>;\n  s: React.FC<React.SVGProps<SVGSVGElement>>;\n  xs: React.FC<React.SVGProps<SVGSVGElement>>;\n  name: string;\n  renderType?: CreateIconRenderType;\n  color?: 'mono' | 'multiple';\n};\n\nexport function createIcon(createProps: CreateIconArguments) {\n  const { name, renderType = renderTypeDefault, color = 'mono' } = createProps;\n  const IconComponent: IconComponent = forwardRef<HTMLSpanElement, IconProps>(\n    (props, ref) => {\n      const { size = 'm', className, view } = props;\n      const Svg = createProps[size];\n      const { addIcon, removeIcon } = useContext(IconsContext);\n\n      const SvgElement = useMemo(() => {\n        return renderType[size] === 'use'\n          ? Svg({ className: cnIcon('Svg', { color }) })\n          : null;\n      }, [Svg]);\n\n      const { children, ...otherProps } = SvgElement?.props ?? {};\n\n      useEffect(() => {\n        if (renderType[size] === 'use') {\n          addIcon?.(name, size, SvgElement);\n        }\n      }, [SvgElement, renderType, size]);\n\n      useEffect(() => {\n        return () => {\n          if (renderType[size] === 'use') {\n            removeIcon?.(name, size);\n          }\n        };\n      }, [Svg, renderType, size]);\n\n      return (\n        <span\n          {...props}\n          className={cnIcon({ size, view, color }, [name, className])}\n          ref={ref}\n        >\n          {addIcon && renderType[size] === 'use' ? (\n            <svg {...otherProps}>\n              <use x=\"0\" y=\"0\" xlinkHref={`#${cnIcons(`${name}_${size}`)}`} />\n            </svg>\n          ) : (\n            <Svg className={cnIcon('Svg')} />\n          )}\n        </span>\n      );\n    },\n  );\n\n  return IconComponent;\n}\n"],"mappings":"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"}